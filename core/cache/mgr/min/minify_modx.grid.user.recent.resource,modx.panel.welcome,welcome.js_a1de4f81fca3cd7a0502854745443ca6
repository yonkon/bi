MODx.grid.RecentlyEditedResourcesByUser=function(config){config=config||{};Ext.applyIf(config,{title:_('recent_docs'),url:MODx.config.connector_url,baseParams:{action:'security/user/getRecentlyEditedResources',user:config.user},autosave:true,save_action:'resource/updatefromgrid',pageSize:10,fields:['id','pagetitle','description','editedon','deleted','published','context_key','menu'],columns:[{header:_('id'),dataIndex:'id',width:75,fixed:true},{header:_('pagetitle'),dataIndex:'pagetitle',editor:{xtype:'textfield',allowBlank:false}},{header:_('published'),dataIndex:'published',width:120,fixed:true,editor:{xtype:'combo-boolean',renderer:'boolean'}}],paging:true,listeners:{afteredit:this.refresh,afterrender:this.onAfterRender,scope:this}});MODx.grid.RecentlyEditedResourcesByUser.superclass.constructor.call(this,config);};Ext.extend(MODx.grid.RecentlyEditedResourcesByUser,MODx.grid.Grid,{preview:function(){window.open(MODx.config.base_url+'?id='+this.menu.record.id);},refresh:function(){var tree=Ext.getCmp('modx-resource-tree');if(tree&&tree.rendered){tree.refresh();}},onAfterRender:function(){var cnt=Ext.getCmp('modx-content'),parent=Ext.get('modx-grid-user-recent-resource');if(cnt&&parent){cnt.on('afterlayout',function(elem,layout){var width=parent.getWidth();if(width>500){this.setWidth(width);}},this);}}});Ext.reg('modx-grid-user-recent-resource',MODx.grid.RecentlyEditedResourcesByUser);;MODx.panel.Welcome=function(config){dashboardName=config.dashboard.id==1?MODx.config.site_name:MODx.config.site_name+' - '+config.dashboard.name;config=config||{};Ext.applyIf(config,{id:'modx-panel-welcome',cls:'container',baseCls:'modx-formpanel',layout:'form',defaults:{collapsible:false,autoHeight:true},items:[{html:'<h2>'+dashboardName+'</h2>',id:'modx-welcome-header',cls:'modx-page-header',border:false},{applyTo:'modx-dashboard',border:false}]});MODx.panel.Welcome.superclass.constructor.call(this,config);this.setup();};Ext.extend(MODx.panel.Welcome,MODx.Panel,{setup:function(){if(this.config.dashboard&&this.config.dashboard.hide_trees){Ext.getCmp('modx-layout').hideLeftbar(false);}
MODx.fireEvent('ready');}});Ext.reg('modx-panel-welcome',MODx.panel.Welcome);;MODx.page.Welcome=function(config){config=config||{};Ext.applyIf(config,{components:[{xtype:'modx-panel-welcome',renderTo:'modx-panel-welcome-div',dashboard:config.dashboard||{}}]});MODx.page.Welcome.superclass.constructor.call(this,config);};Ext.extend(MODx.page.Welcome,MODx.Component);Ext.reg('modx-page-welcome',MODx.page.Welcome);MODx.loadWelcomePanel=function(url){if(!url)return;MODx.helpWindow=new Ext.Window({title:_('welcome_title'),width:850,height:500,modal:true,layout:'fit',html:'<iframe onload="parent.MODx.helpWindow.getEl().unmask();" src="'+url+'" width="100%" height="100%" frameborder="0"></iframe>'});MODx.helpWindow.show(Ext.getBody());};