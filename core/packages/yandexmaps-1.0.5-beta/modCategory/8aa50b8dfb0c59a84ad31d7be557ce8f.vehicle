<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '3b514959d0b8a1fadc19b6b92a82f4b8' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.yandexMaps","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<script type=\\"text\\/javascript\\">\\nif(typeof jQuery == \\"undefined\\"){\\n\\tdocument.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/yandex.st\\/jquery\\/2.1.1\\/jquery.min.js\\" ><\\/\'+\'script>\');\\n}\\n\\nif(typeof ymaps == \\"undefined\\"){\\n\\t\\/\\/document.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU\\" ><\\/\'+\'script>\');\\n\\tdocument.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU&load=Map,Placemark,GeoObjectCollection,map.addon.balloon,geoObject.addon.balloon,package.controls\\" ><\\/\'+\'script>\');\\n}\\n<\\/script>\\n\\n\\n<div id=\\"[[+idMap]]\\" style=\\"[[+styleMapBlock]]\\" class=\\"[[+classMapBlock]]\\"><\\/div>\\n\\n[[+filtersFormItems:notempty=`<div class=\\"[[+classFiltersBlock]]\\" style=\\"[[+styleFiltersBlock]]\\">\\n\\t<form id=\\"[[+idFiltersForm]]\\" class=\\"ymFiltersForm\\" action=\\"[[~[[*id]]?scheme=`full`]]\\" method=\\"POST\\">\\n\\t\\t[[+filtersFormItems]]\\n\\t\\t<div class=\\"loader\\"><\\/div>\\n\\t<\\/form>\\n<\\/div>`]]\\n\\n<div style=\\"clear:both\\"><\\/div>\\n\\n\\n<script type=\\"text\\/javascript\\">\\nvar ymFormId = \'#[[+idFiltersForm]]\';\\nvar ymFormAction = $(ymFormId).attr(\'action\');\\n\\nymaps.ready()\\n\\t.done(function (ymaps) {\\n\\t\\tvar mapCenter[[+idMap]] = [[+centerCoords]],\\n\\t\\t\\tmyMap[[+idMap]] = new ymaps.Map(\'[[+idMap]]\', {\\n\\t\\t\\t\\tcenter: mapCenter[[+idMap]],\\n\\t\\t\\t\\tzoom: [[+zoom]],\\n\\t\\t\\t\\tcontrols: [\'zoomControl\']\\n\\t\\t\\t}),\\n\\t\\t\\tplacemarks = [];\\n\\t\\t\\n\\t\\tmyMap[[+idMap]].controls.add(new ymaps.control.TypeSelector({options: { position: { left: 10, top: 10 }}}));\\n\\t\\t\\n\\t\\t\\n\\t\\t$.getJSON( ymFormAction , \\"ymJSON=1\\" ).done( function (json) {\\n\\t\\t\\twindow.geoObjects = ymaps.geoQuery(json);\\n\\t\\t\\twindow.clusters = geoObjects.search(\\"geometry.type == \'Point\'\\").clusterize({preset: \'islands#invertedVioletClusterIcons\'});\\n\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters);\\n\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\tgeoObjects.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t});\\n\\t\\t});\\n\\t\\t\\n\\t\\t\\n\\t\\t[[+filtersFormItems:notempty=`\\n\\t\\t$(\\".[[+classFiltersItem]]\\").click(function() {\\n\\t\\t\\tvar thisItem = this;\\n\\t\\t\\tvar filtersItemId = $(this).attr(\'id\'); \\/\\/ id \\u043a\\u043b\\u0438\\u043a\\u043d\\u0443\\u0442\\u043e\\u0433\\u043e \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u0430\\n\\t\\t\\t\\n\\t\\t\\t$(ymFormId).find(\'.loader\').show(); \\/\\/ \\u043f\\u043e\\u043a\\u0430\\u0436\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0441\\u043a\\u0440\\u044b\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\tif( $(thisItem).hasClass(\'ymFiltersItemHide\') )\\n\\t\\t\\t{\\n\\t\\t\\t\\t$(ymFormId).find(\'#checkbox_\' + filtersItemId).val(\'0\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c input[type=hidden] - val\\n\\t\\t\\t\\t$(thisItem).removeClass(\'ymFiltersItemHide\').addClass(\'ymFiltersItemShow\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0439 \\u043a\\u043b\\u0430\\u0441\\u0441\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\tvar ymFormData = $(ymFormId).serializeArray(), ymFormDataString = \'\';\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.each(ymFormData, function(i_1, val_1) {\\n\\t\\t\\t\\t\\t$.each(val_1, function(i_2, val_2) {\\n\\t\\t\\t\\t\\t\\tif(i_2 == \'name\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'=\';\\n\\t\\t\\t\\t\\t\\t} else if(i_2 == \'value\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'&\';\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/alert( ymFormDataString );\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.getJSON( ymFormAction , ymFormDataString )\\n\\t\\t\\t\\t\\t.done( function (json) {\\n\\t\\t\\t\\t\\t\\t\\/*window.geoObjects2 = ymaps.geoQuery(json)\\n\\t\\t\\t\\t\\t\\t\\t.addToMap(myMap[[+idMap]])\\n\\t\\t\\t\\t\\t\\t\\t.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t\\t});*\\/\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\twindow.geoObjects2 = ymaps.geoQuery(json);\\n\\t\\t\\t\\t\\t\\twindow.clusters2 = geoObjects2.search(\\"geometry.type == \'Point\'\\").clusterize();\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters2);\\n\\t\\t\\t\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\t\\t\\t\\tgeoObjects2.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tgeoObjects.remove(geoObjects2).removeFromMap(myMap[[+idMap]]); \\/\\/ \\u0443\\u0434\\u0430\\u043b\\u044f\\u0435\\u043c \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0435 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u044b \\u0441 \\u043a\\u0430\\u0440\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.remove(clusters);\\n\\t\\t\\t\\t\\t\\tgeoObjects = geoObjects2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters = clusters2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tgeoObjects2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$(ymFormId).find(\'.loader\').hide(); \\/\\/ \\u0441\\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\t\\t\\t$(thisItem).parent().find(\'.ymFiltersWrapper\').slideUp(); \\/\\/ \\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043f\\u043e\\u0434\\u043f\\u0443\\u043d\\u043a\\u0442\\u044b, \\u0435\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c..\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t} \\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0441\\u043a\\u0440\\u044b\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\telse\\n\\t\\t\\t{ \\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u043e\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\t\\t$(ymFormId).find(\'#checkbox_\' + filtersItemId).val(\'1\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c input[type=hidden] - val\\n\\t\\t\\t\\t$(thisItem).removeClass(\'ymFiltersItemShow\').addClass(\'ymFiltersItemHide\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0439 \\u043a\\u043b\\u0430\\u0441\\u0441\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\tvar ymFormData = $(ymFormId).serializeArray(), ymFormDataString = \'\';\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.each(ymFormData, function(i_1, val_1) {\\n\\t\\t\\t\\t\\t$.each(val_1, function(i_2, val_2) {\\n\\t\\t\\t\\t\\t\\tif(i_2 == \'name\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'=\';\\n\\t\\t\\t\\t\\t\\t} else if(i_2 == \'value\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'&\';\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.getJSON( ymFormAction , ymFormDataString )\\n\\t\\t\\t\\t\\t.done( function (json) {\\n\\t\\t\\t\\t\\t\\t\\/*window.geoObjects2 = ymaps.geoQuery(json)\\n\\t\\t\\t\\t\\t\\t\\t.addToMap(myMap[[+idMap]])\\n\\t\\t\\t\\t\\t\\t\\t.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t\\t});*\\/\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\twindow.geoObjects2 = ymaps.geoQuery(json);\\n\\t\\t\\t\\t\\t\\twindow.clusters2 = geoObjects2.search(\\"geometry.type == \'Point\'\\").clusterize();\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters2);\\n\\t\\t\\t\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\t\\t\\t\\tgeoObjects2.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tgeoObjects.remove(geoObjects2).removeFromMap(myMap[[+idMap]]); \\/\\/ \\u0443\\u0434\\u0430\\u043b\\u044f\\u0435\\u043c \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0435 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u044b \\u0441 \\u043a\\u0430\\u0440\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.remove(clusters);\\n\\t\\t\\t\\t\\t\\tgeoObjects = geoObjects2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters = clusters2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tgeoObjects2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$(ymFormId).find(\'.loader\').hide(); \\/\\/ \\u0441\\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\t\\t\\t$(thisItem).parent().find(\'.ymFiltersWrapper\').slideDown(); \\/\\/ \\u043f\\u043e\\u043a\\u0430\\u0436\\u0435\\u043c \\u043f\\u043e\\u0434\\u043f\\u0443\\u043d\\u043a\\u0442\\u044b, \\u0435\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c..\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u043e\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t});\\n\\t\\t`]]\\n\\t});\\n<\\/script>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/yandexmaps\\/elements\\/chunks\\/chunk.tpl.yandexMaps.tpl","content":"<script type=\\"text\\/javascript\\">\\nif(typeof jQuery == \\"undefined\\"){\\n\\tdocument.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/yandex.st\\/jquery\\/2.1.1\\/jquery.min.js\\" ><\\/\'+\'script>\');\\n}\\n\\nif(typeof ymaps == \\"undefined\\"){\\n\\t\\/\\/document.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU\\" ><\\/\'+\'script>\');\\n\\tdocument.write(\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU&load=Map,Placemark,GeoObjectCollection,map.addon.balloon,geoObject.addon.balloon,package.controls\\" ><\\/\'+\'script>\');\\n}\\n<\\/script>\\n\\n\\n<div id=\\"[[+idMap]]\\" style=\\"[[+styleMapBlock]]\\" class=\\"[[+classMapBlock]]\\"><\\/div>\\n\\n[[+filtersFormItems:notempty=`<div class=\\"[[+classFiltersBlock]]\\" style=\\"[[+styleFiltersBlock]]\\">\\n\\t<form id=\\"[[+idFiltersForm]]\\" class=\\"ymFiltersForm\\" action=\\"[[~[[*id]]?scheme=`full`]]\\" method=\\"POST\\">\\n\\t\\t[[+filtersFormItems]]\\n\\t\\t<div class=\\"loader\\"><\\/div>\\n\\t<\\/form>\\n<\\/div>`]]\\n\\n<div style=\\"clear:both\\"><\\/div>\\n\\n\\n<script type=\\"text\\/javascript\\">\\nvar ymFormId = \'#[[+idFiltersForm]]\';\\nvar ymFormAction = $(ymFormId).attr(\'action\');\\n\\nymaps.ready()\\n\\t.done(function (ymaps) {\\n\\t\\tvar mapCenter[[+idMap]] = [[+centerCoords]],\\n\\t\\t\\tmyMap[[+idMap]] = new ymaps.Map(\'[[+idMap]]\', {\\n\\t\\t\\t\\tcenter: mapCenter[[+idMap]],\\n\\t\\t\\t\\tzoom: [[+zoom]],\\n\\t\\t\\t\\tcontrols: [\'zoomControl\']\\n\\t\\t\\t}),\\n\\t\\t\\tplacemarks = [];\\n\\t\\t\\n\\t\\tmyMap[[+idMap]].controls.add(new ymaps.control.TypeSelector({options: { position: { left: 10, top: 10 }}}));\\n\\t\\t\\n\\t\\t\\n\\t\\t$.getJSON( ymFormAction , \\"ymJSON=1\\" ).done( function (json) {\\n\\t\\t\\twindow.geoObjects = ymaps.geoQuery(json);\\n\\t\\t\\twindow.clusters = geoObjects.search(\\"geometry.type == \'Point\'\\").clusterize({preset: \'islands#invertedVioletClusterIcons\'});\\n\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters);\\n\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\tgeoObjects.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t});\\n\\t\\t});\\n\\t\\t\\n\\t\\t\\n\\t\\t[[+filtersFormItems:notempty=`\\n\\t\\t$(\\".[[+classFiltersItem]]\\").click(function() {\\n\\t\\t\\tvar thisItem = this;\\n\\t\\t\\tvar filtersItemId = $(this).attr(\'id\'); \\/\\/ id \\u043a\\u043b\\u0438\\u043a\\u043d\\u0443\\u0442\\u043e\\u0433\\u043e \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u0430\\n\\t\\t\\t\\n\\t\\t\\t$(ymFormId).find(\'.loader\').show(); \\/\\/ \\u043f\\u043e\\u043a\\u0430\\u0436\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0441\\u043a\\u0440\\u044b\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\tif( $(thisItem).hasClass(\'ymFiltersItemHide\') )\\n\\t\\t\\t{\\n\\t\\t\\t\\t$(ymFormId).find(\'#checkbox_\' + filtersItemId).val(\'0\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c input[type=hidden] - val\\n\\t\\t\\t\\t$(thisItem).removeClass(\'ymFiltersItemHide\').addClass(\'ymFiltersItemShow\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0439 \\u043a\\u043b\\u0430\\u0441\\u0441\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\tvar ymFormData = $(ymFormId).serializeArray(), ymFormDataString = \'\';\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.each(ymFormData, function(i_1, val_1) {\\n\\t\\t\\t\\t\\t$.each(val_1, function(i_2, val_2) {\\n\\t\\t\\t\\t\\t\\tif(i_2 == \'name\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'=\';\\n\\t\\t\\t\\t\\t\\t} else if(i_2 == \'value\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'&\';\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/alert( ymFormDataString );\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.getJSON( ymFormAction , ymFormDataString )\\n\\t\\t\\t\\t\\t.done( function (json) {\\n\\t\\t\\t\\t\\t\\t\\/*window.geoObjects2 = ymaps.geoQuery(json)\\n\\t\\t\\t\\t\\t\\t\\t.addToMap(myMap[[+idMap]])\\n\\t\\t\\t\\t\\t\\t\\t.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t\\t});*\\/\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\twindow.geoObjects2 = ymaps.geoQuery(json);\\n\\t\\t\\t\\t\\t\\twindow.clusters2 = geoObjects2.search(\\"geometry.type == \'Point\'\\").clusterize();\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters2);\\n\\t\\t\\t\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\t\\t\\t\\tgeoObjects2.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tgeoObjects.remove(geoObjects2).removeFromMap(myMap[[+idMap]]); \\/\\/ \\u0443\\u0434\\u0430\\u043b\\u044f\\u0435\\u043c \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0435 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u044b \\u0441 \\u043a\\u0430\\u0440\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.remove(clusters);\\n\\t\\t\\t\\t\\t\\tgeoObjects = geoObjects2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters = clusters2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tgeoObjects2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$(ymFormId).find(\'.loader\').hide(); \\/\\/ \\u0441\\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\t\\t\\t$(thisItem).parent().find(\'.ymFiltersWrapper\').slideUp(); \\/\\/ \\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043f\\u043e\\u0434\\u043f\\u0443\\u043d\\u043a\\u0442\\u044b, \\u0435\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c..\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t} \\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0441\\u043a\\u0440\\u044b\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\telse\\n\\t\\t\\t{ \\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u043e\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t\\t\\t$(ymFormId).find(\'#checkbox_\' + filtersItemId).val(\'1\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c input[type=hidden] - val\\n\\t\\t\\t\\t$(thisItem).removeClass(\'ymFiltersItemShow\').addClass(\'ymFiltersItemHide\'); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0439 \\u043a\\u043b\\u0430\\u0441\\u0441\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\tvar ymFormData = $(ymFormId).serializeArray(), ymFormDataString = \'\';\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.each(ymFormData, function(i_1, val_1) {\\n\\t\\t\\t\\t\\t$.each(val_1, function(i_2, val_2) {\\n\\t\\t\\t\\t\\t\\tif(i_2 == \'name\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'=\';\\n\\t\\t\\t\\t\\t\\t} else if(i_2 == \'value\') {\\n\\t\\t\\t\\t\\t\\t\\tymFormDataString += val_2 + \'&\';\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b \\u0434\\u043b\\u044f \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0447\\u0438 \\u0430\\u044f\\u043a\\u0441\\u043e\\u043c\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t$.getJSON( ymFormAction , ymFormDataString )\\n\\t\\t\\t\\t\\t.done( function (json) {\\n\\t\\t\\t\\t\\t\\t\\/*window.geoObjects2 = ymaps.geoQuery(json)\\n\\t\\t\\t\\t\\t\\t\\t.addToMap(myMap[[+idMap]])\\n\\t\\t\\t\\t\\t\\t\\t.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t\\t});*\\/\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\twindow.geoObjects2 = ymaps.geoQuery(json);\\n\\t\\t\\t\\t\\t\\twindow.clusters2 = geoObjects2.search(\\"geometry.type == \'Point\'\\").clusterize();\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.add(clusters2);\\n\\t\\t\\t\\t\\t\\t\\/*.addToMap(myMap[[+idMap]])*\\/\\n\\t\\t\\t\\t\\t\\tgeoObjects2.applyBoundsToMap(myMap[[+idMap]], {\\n\\t\\t\\t\\t\\t\\t\\tcheckZoomRange: true\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tgeoObjects.remove(geoObjects2).removeFromMap(myMap[[+idMap]]); \\/\\/ \\u0443\\u0434\\u0430\\u043b\\u044f\\u0435\\u043c \\u0442\\u0435\\u043a\\u0443\\u0449\\u0438\\u0435 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u044b \\u0441 \\u043a\\u0430\\u0440\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\tmyMap[[+idMap]].geoObjects.remove(clusters);\\n\\t\\t\\t\\t\\t\\tgeoObjects = geoObjects2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters = clusters2; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tgeoObjects2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\tclusters2=\'\'; \\/\\/ \\u043a\\u043e\\u043b\\u0434\\u0443\\u0435\\u043c\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$(ymFormId).find(\'.loader\').hide(); \\/\\/ \\u0441\\u043f\\u0440\\u044f\\u0447\\u0435\\u043c \\u043b\\u043e\\u0430\\u0434\\u0435\\u0440\\n\\t\\t\\t\\t\\t\\t$(thisItem).parent().find(\'.ymFiltersWrapper\').slideDown(); \\/\\/ \\u043f\\u043e\\u043a\\u0430\\u0436\\u0435\\u043c \\u043f\\u043e\\u0434\\u043f\\u0443\\u043d\\u043a\\u0442\\u044b, \\u0435\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c..\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u043e\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u044d\\u043b\\u0435\\u043c\\u0435\\u043d\\u0442\\u044b\\n\\t\\t});\\n\\t\\t`]]\\n\\t});\\n<\\/script>"}',
        'guid' => '80c0e136c0367373f7a2745c49ce26b9',
        'native_key' => 0,
        'signature' => '64e991ba839fc2c9412ac927248c793c',
      ),
      'ac04612297b4fc1fd78ce27b3c557c64' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.yandexMaps.filtersItemsWrapper","description":"\\u0428\\u0430\\u0431\\u043b\\u043e\\u043d \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0430 \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435","editor_type":0,"category":0,"cache_type":0,"snippet":"[[+title:notempty=`<div id=\\"ymFiltersHeader[[+filterId]][[+subFilterId]]\\" class=\\"ymFiltersHeader\\"><b>[[+title]]<\\/b><\\/div>`]]\\n<ul id=\\"ym[[+subFilterId:notempty=`Sub`]]Filters[[+filterId]][[+subFilterId]]\\" class=\\"ym[[+subFilterId:notempty=`Sub`]]Filters\\">\\n\\t[[+wrapper]]\\n<\\/ul>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/yandexmaps\\/elements\\/chunks\\/chunk.tpl.yandexMaps.filtersItemsWrapper.tpl","content":"[[+title:notempty=`<div id=\\"ymFiltersHeader[[+filterId]][[+subFilterId]]\\" class=\\"ymFiltersHeader\\"><b>[[+title]]<\\/b><\\/div>`]]\\n<ul id=\\"ym[[+subFilterId:notempty=`Sub`]]Filters[[+filterId]][[+subFilterId]]\\" class=\\"ym[[+subFilterId:notempty=`Sub`]]Filters\\">\\n\\t[[+wrapper]]\\n<\\/ul>"}',
        'guid' => 'd9d1dcaf13192982e0b4c293a35a3893',
        'native_key' => 0,
        'signature' => 'fa5050f072960d7f10c94de36ba5b5cd',
      ),
      '01d8da4d8a24338b0fb873639b1c2afc' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.yandexMaps.filtersItems","description":"\\u0428\\u0430\\u0431\\u043b\\u043e\\u043d \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ymFilters[[+idFilterItem]][[+idSubFilterItem]]_li\\">\\n\\t<input type=\\"hidden\\" name=\\"ym[checkboxes][[+inputSufixName]]\\" id=\\"checkbox_ymFilters[[+idFilterItem]][[+idSubFilterItem]]\\" value=\\"[[+itemInputValue]]\\" \\/>\\n\\t<a href=\\"javascript:;\\" class=\\"[[+classFiltersItem]] [[+classHideOrShow]]\\" id=\\"ymFilters[[+idFilterItem]][[+idSubFilterItem]]\\">\\n\\t\\t[[+itemTitle]]\\n\\t<\\/a>\\n\\t[[+wrapper:notempty=`<div class=\\"ymFiltersWrapper\\">\\n\\t\\t[[+wrapper]]\\n\\t<\\/div>`]]\\n<\\/li>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/yandexmaps\\/elements\\/chunks\\/chunk.tpl.yandexMaps.filtersItems.tpl","content":"<li class=\\"ymFilters[[+idFilterItem]][[+idSubFilterItem]]_li\\">\\n\\t<input type=\\"hidden\\" name=\\"ym[checkboxes][[+inputSufixName]]\\" id=\\"checkbox_ymFilters[[+idFilterItem]][[+idSubFilterItem]]\\" value=\\"[[+itemInputValue]]\\" \\/>\\n\\t<a href=\\"javascript:;\\" class=\\"[[+classFiltersItem]] [[+classHideOrShow]]\\" id=\\"ymFilters[[+idFilterItem]][[+idSubFilterItem]]\\">\\n\\t\\t[[+itemTitle]]\\n\\t<\\/a>\\n\\t[[+wrapper:notempty=`<div class=\\"ymFiltersWrapper\\">\\n\\t\\t[[+wrapper]]\\n\\t<\\/div>`]]\\n<\\/li>"}',
        'guid' => '6f2b5027af01201552c245ca9098a199',
        'native_key' => 0,
        'signature' => 'bf572d7c69eef47a50cee6107d2f4c09',
      ),
    ),
    'Snippets' => 
    array (
      '78459139b6d6e50d8182b6a44866989b' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"yandexMaps","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/\\/ \\u0421\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442 Yandex-\\u041a\\u0430\\u0440\\u0442\\u0430 \\u0441\\u043e \\u0441\\u0432\\u043e\\u0438\\u043c\\u0438 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438-\\u043c\\u0430\\u0440\\u043a\\u0435\\u0440\\u0430\\u043c\\u0438 + \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043f\\u043e \\u043a\\u043b\\u0438\\u043a\\u0443 \\u043e\\u0442\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0451\\u043d\\u043d\\u044b\\u0435 \\u0442\\u0438\\u043f\\u044b \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\n$YandexMaps = $modx->getService(\'yandexmaps\',\'YandexMaps\',$modx->getOption(\'yandexmaps_core_path\',null,$modx->getOption(\'core_path\').\'components\\/yandexmaps\\/\').\'model\\/yandexmaps\\/\',$scriptProperties);\\n$YandexMaps->initialize($modx->context->key, $scriptProperties);\\n\\n\\/\\/ \\u041f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c pdoTools \\u0438 pdoFetch\\n$pdo = $modx->getService(\'pdoTools\');\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\nif(!is_object($pdo)) { return \'[[%yandexmaps_pdotools_install]]\'; }\\n\\n\\/* >> \\u041f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b *\\/\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.yandexMaps\'); \\/\\/ \\u043e\\u0441\\u043d\\u043e\\u0432\\u043d\\u043e\\u0439 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d\\n$tplFiltersItemsWrapper = $modx->getOption(\'tplFiltersItemsWrapper\', $scriptProperties, \'tpl.yandexMaps.filtersItemsWrapper\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0430 \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$tplFiltersItems = $modx->getOption(\'tplFiltersItems\', $scriptProperties, \'tpl.yandexMaps.filtersItems\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n$idMap = $modx->getOption(\'idMap\', $scriptProperties, \'yandexMap\'); \\/\\/ id \\u043a\\u0430\\u0440\\u0442\\u044b \\u0434\\u043b\\u044f html \\u0440\\u0430\\u0437\\u043c\\u0435\\u0442\\u043a\\u0438 \\u0438 JS \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\\n$centerCoords = $modx->getOption(\'centerCoords\', $scriptProperties, \'55.753565715196416,37.62001016381833\'); \\/\\/ \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0434\\u043b\\u044f \\u0446\\u0435\\u043d\\u0442\\u0440\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$zoom = $modx->getOption(\'zoom\', $scriptProperties, \'14\'); \\/\\/ \\u0437\\u0443\\u043c (\\u043f\\u0440\\u0438\\u0431\\u043b\\u0438\\u0436\\u0435\\u043d\\u0438\\u0435)\\n$addressPrefix = $modx->getOption(\'addressPrefix\', $scriptProperties, \'\'); \\/\\/ \\u043f\\u0440\\u0435\\u0444\\u0438\\u043a\\u0441 \\u0432 \\u043d\\u0430\\u0447\\u0430\\u043b\\u043e \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430.. \\u0432 \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u0435\\u0441\\u043b\\u0438 \\u0432 TV \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u0431\\u0435\\u0437 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u0438\\u044f \\u0441\\u0442\\u0440\\u0430\\u043d\\u044b \\u0438 \\u0433\\u043e\\u0440\\u043e\\u0434\\u0430\\n$tvAddress = $modx->getOption(\'tvAddress\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043c\\u044f TV \\u043f\\u043e\\u043b\\u044f, \\u0432 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u043c \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d \\u0430\\u0434\\u0440\\u0435\\u0441\\n$tvCoords = $modx->getOption(\'tvCoords\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043c\\u044f TV \\u043f\\u043e\\u043b\\u044f \\u0441 \\u0442\\u0438\\u043f\\u043e\\u043c yandexMaps (\\u0432 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u0431\\u0443\\u0434\\u0435\\u043c \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n\\n$objectsTypesJSON = $modx->getOption(\'objectsTypesJSON\', $scriptProperties, \'\'); \\/\\/ JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0430 \\u0441 \\u0442\\u0438\\u043f\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432, \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044c\\u0441\\u043a\\u0438\\u043c\\u0438 id, \\u0442\\u0430\\u0439\\u0442\\u043b\\u0430\\u043c\\u0438, \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u0438\\u043b\\u0438 \\u043f\\u0440\\u0435\\u0441\\u0435\\u0442\\u0430\\u043c\\u0438, \\u0430 \\u0442\\u0430\\u043a\\u0436\\u0435 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 \\u043f\\u043e TV (\\u0438 \\u043d\\u0430\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043a\\u0430\\u0436\\u0434\\u043e\\u043c\\u0443 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043d\\u0442\\u0443 \\u043e\\u0442\\u0432\\u0435\\u0442\\u0430 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0438 \\u0438\\u043b\\u0438 \\u043f\\u0440\\u0435\\u0441\\u0435\\u0442\\u0430)\\n\\n$id = $modx->getOption(\'id\', $scriptProperties, $modx->resource->get(\'id\') ); \\/\\/ id \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0434\\u043b\\u044f \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430 \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$markerIcon = $modx->getOption(\'markerIcon\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 \\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 (\\u043d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440: \\"\\/images\\/map_marker.png\\")\\n$markerPreset = $modx->getOption(\'markerPreset\', $scriptProperties, \'islands#redDotIcon\'); \\/\\/ \\u043a\\u043b\\u044e\\u0447 \\u0441\\u0442\\u0438\\u043b\\u044f \\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 (\\u043d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440: \\"islands#redClusterIcons\\" \\u0438\\u043b\\u0438 \\"islands#violetDotIcon\\")\\n$markerPresetText = $modx->getOption(\'markerPresetText\', $scriptProperties, \'\'); \\/\\/ \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset (\\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n$markerPresetFieldText = $modx->getOption(\'markerPresetFieldText\', $scriptProperties, \'\'); \\/\\/ \\u043f\\u043e\\u043b\\u0435, \\u043e\\u0442\\u043a\\u0443\\u0434\\u0430 \\u0438\\u0437\\u0432\\u043b\\u0435\\u043a\\u0430\\u0442\\u044c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset (\\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n\\n$fieldForBalloonContent = $modx->getOption(\'fieldForBalloonContent\', $scriptProperties, \'\'); \\/\\/ \\u043a\\u0430\\u043a\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f \\u0432 balloon (content, introtext, description, longtitle, pagetitle)\\n$fieldForHint = $modx->getOption(\'fieldForHint\', $scriptProperties, \'\'); \\/\\/ \\u043a\\u0430\\u043a\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438 \\u043f\\u0440\\u0438 \\u043d\\u0430\\u0432\\u0435\\u0434\\u0435\\u043d\\u0438\\u0438 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 (introtext, description, menutitle, longtitle, pagetitle)\\n$showMoreLink = $modx->getOption(\'showMoreLink\', $scriptProperties, false); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u0438 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\" \\u043d\\u0430 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 \\u0432 \\u043a\\u043e\\u043d\\u0435\\u0446 \\u0442\\u0435\\u043a\\u0441\\u0442\\u0430 \\u0432 balloonContent\\n$showMoreLinkTpl = $modx->getOption(\'showMoreLinkTpl\', $scriptProperties, \'@INLINE <p><a href=\\"[[~[[+id]]]]\\" target=\\"_blank\\">\\u041f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435<\\/a><\\/p>\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0441\\u0441\\u044b\\u043b\\u043a\\u0438 (\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435) \\u043d\\u0430 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f \\u0432 balloon\\n\\n$classMapBlock = $modx->getOption(\'classMapBlock\', $scriptProperties, \'ymBlock\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$styleMapBlock = $modx->getOption(\'styleMapBlock\', $scriptProperties, \'float:left; width:90%; height:100%;\'); \\/\\/ \\u0441\\u0442\\u0438\\u043b\\u044c \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$idFiltersForm = $modx->getOption(\'idFiltersForm\', $scriptProperties, \'ymFiltersForm\'); \\/\\/ id \\u0434\\u043b\\u044f \\u0444\\u043e\\u0440\\u043c\\u044b \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$classFiltersBlock = $modx->getOption(\'classFiltersBlock\', $scriptProperties, \'ymFiltersBlock\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$styleFiltersBlock = $modx->getOption(\'styleFiltersBlock\', $scriptProperties, \'float:left; width:10%; height:100%;\'); \\/\\/ \\u0441\\u0442\\u0438\\u043b\\u044c \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$classFiltersItem = $modx->getOption(\'classFiltersItem\', $scriptProperties, \'ymFiltersItem\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0441\\u0441\\u044b\\u043b\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 (\\u043d\\u0443\\u0436\\u0435\\u043d \\u0434\\u043b\\u044f \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u043d\\u0438\\u044f \\u043a\\u043b\\u0438\\u043a\\u0430 JS\\u043e\\u043c)\\n\\/* << \\u041f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b *\\/\\n\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\nif($fieldForBalloonContent!=\'\') {\\n\\tif(\\t$fieldForBalloonContent==\'content\' OR \\n\\t\\t$fieldForBalloonContent==\'introtext\' OR \\n\\t\\t$fieldForBalloonContent==\'description\' OR \\n\\t\\t$fieldForBalloonContent==\'longtitle\' OR \\n\\t\\t$fieldForBalloonContent==\'pagetitle\'\\n\\t) { } else {\\n\\t\\t$fieldForBalloonContent = \'\';\\n\\t}\\n}\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\n\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\nif($fieldForHint!=\'\') {\\n\\tif(\\t$fieldForHint==\'introtext\' OR \\n\\t\\t$fieldForHint==\'description\' OR \\n\\t\\t$fieldForHint==\'menutitle\' OR \\n\\t\\t$fieldForHint==\'longtitle\' OR \\n\\t\\t$fieldForHint==\'pagetitle\'\\n\\t) { } else {\\n\\t\\t$fieldForHint = \'\';\\n\\t}\\n}\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\n\\n\\nif($tvCoords == \'\') { \\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u043d\\u0435 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b TV\\u0448\\u043a\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442 - \\u0434\\u0430\\u043b\\u044c\\u0448\\u0435 \\u043d\\u0435 \\u0438\\u0434\\u0451\\u043c..\\n\\treturn;\\n}\\n\\n\\n\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0438\\u0445 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\\u0435\\u0439\\u0448\\u0435\\u0439 \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b\\n$ymFormData=\'\';\\nif(isset($_REQUEST[\'ym\'])) {\\n\\t$ymFormData = $_REQUEST[\'ym\'];\\n\\t\\/\\/print_r( $ymFormData ); die;\\n}\\n\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0438\\u0445 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\\u0435\\u0439\\u0448\\u0435\\u0439 \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b\\n\\n\\n$oneObject=false;\\n\\n$geoObjectsArray=array();\\n$geoObjectsForYandexMapArray=array();\\n\\n\\nif($objectsTypesJSON != \'\') {\\n\\t$objectsTypes = $modx->fromJSON($objectsTypesJSON); \\/\\/ \\u0438\\u0437 json \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432\\n\\t\\/\\/print_r( $objectsTypes ); die;\\n\\t\\n\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\tfor($i=0; $i<count($objectsTypes); $i++)\\n\\t{\\n\\t\\tforeach($objectsTypes[$i] as $objectsTypesKeyId => $objectsTypesDataArray)\\n\\t\\t{\\n\\t\\t\\t$includeTVs = \'\';\\n\\t\\t\\t$includeTVs .= ( $tvAddress==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvAddress );\\n\\t\\t\\t$includeTVs .= ( $tvCoords==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvCoords );\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0420\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u043c \\u0441 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 (\\u043f\\u043e\\u043a\\u0430 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e tv \\u043f\\u043e\\u043b\\u044f)\\n\\t\\t\\tforeach($objectsTypesDataArray[\'subFilters\'] as $subFiltersKeyId => $subFiltersDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\tif($subFiltersDataArray[\'type\'] == \'tv\' OR !isset($subFiltersDataArray[\'type\'])) {\\n\\t\\t\\t\\t\\t$includeTVs .= ($includeTVs==\'\' ? \'\' : \',\') . $subFiltersKeyId; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c TV\\u0448\\u043a\\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e includeTVs, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a TV \\u0432 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0440\\u044b pdoFetch\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tfor($v=0; $v<count( $subFiltersDataArray[\'options\'] ); $v++)\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$tvFilterData = explode(\'==\', $subFiltersDataArray[\'options\'][$v][\'value\'] ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430 TV, \\u043d\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u044f \\u043d\\u0430 \\u0442\\u043e, \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d\\u043e \\u043e\\u043d\\u043e \\u0441 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043b\\u0438\\u0442\\u0435\\u043b\\u0435\\u043c \\"==\\" \\u0438\\u043b\\u0438 \\u0431\\u0435\\u0437 \\u043d\\u0435\\u0433\\u043e\\n\\t\\t\\t\\t\\t\\t$tvFilterVal = ( isset($tvFilterData[1]) ? $tvFilterData[1] : $tvFilterData[0] );\\n\\t\\t\\t\\t\\t\\t$tvFilterTitle = $tvFilterData[0];\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0444\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u044b\\u043c\\u0438 TV \\u043f\\u043e\\u043b\\u044f\\u043c\\u0438 \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\\n\\t\\t\\t\\t\\t\\t$subFiltersArray[ $objectsTypesKeyId ][ $subFiltersKeyId ][] = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'val\' => $tvFilterVal,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'icon\' => $subFiltersDataArray[\'options\'][$v][\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $subFiltersDataArray[\'options\'][$v][\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'presetText\' => $subFiltersDataArray[\'options\'][$v][\'presetText\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'presetFieldText\' => $subFiltersDataArray[\'options\'][$v][\'presetFieldText\'],\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r( $subFiltersArray ); die;\\n\\t\\t\\t\\/\\/print_r( $includeTVs ); die;\\n\\t\\t\\t\\/\\/ << \\u0420\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u043c \\u0441 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 (\\u043f\\u043e\\u043a\\u0430 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e tv \\u043f\\u043e\\u043b\\u044f)\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043f\\u043e TV \\u043f\\u043e\\u043b\\u044f\\u043c \\u0434\\u043b\\u044f \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0430 where, \\u0434\\u043b\\u044f \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u0438\\u0440\\u043e\\u0432\\u043a\\u0438 \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438 pdoFetch\\n\\t\\t\\t$setConfigWhere=array();\\n\\t\\t\\tforeach($ymFormData as $ymFormDataType => $ymFormDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\tforeach($ymFormDataArray as $ymFormDataKeyId => $ymFormDataSubArray)\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tif($ymFormDataType == \'checkboxes\') {\\n\\t\\t\\t\\t\\t\\tif($ymFormDataKeyId == $objectsTypesKeyId) {\\n\\t\\t\\t\\t\\t\\t\\tif($ymFormDataSubArray[\'val\']) {\\n\\t\\t\\t\\t\\t\\t\\t\\tforeach($ymFormDataSubArray as $ymFormDataSubFieldKeyId => $ymFormDataSubFieldArray)\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif(is_array($ymFormDataSubFieldArray) AND count($ymFormDataSubFieldArray)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayIN=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayNotIN=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tforeach($ymFormDataSubFieldArray as $key => $value)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif($value) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayIN[] = $key;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayNotIN[] = $key;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif(count($dataArrayIN)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray[ \'TV\' . $ymFormDataSubFieldKeyId . \'.value:IN\' ] = $dataArrayIN;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif(count($dataArrayNotIN)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray[ \'TV\' . $ymFormDataSubFieldKeyId . \'.value:NOT IN\' ] = $dataArrayNotIN;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$setConfigWhere[] = $dataWhereArray;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t\\t\\t$setConfigWhere = array( \'id\' => \'0\' ); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u044d\\u0442\\u043e, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043d\\u0435 \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u0442\\u0438\\u043f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432, \\u0432 \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435, \\u043a\\u043e\\u0433\\u0434\\u0430 \\u0443 \\u043d\\u0430\\u0441 \\u0432 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0435 \\u0433\\u0430\\u043b\\u043e\\u0447\\u043a\\u0430 \\u043e\\u0442\\u043c\\u0435\\u043d\\u0435\\u043d\\u0430\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r( $setConfigWhere ); die;\\n\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043f\\u043e TV \\u043f\\u043e\\u043b\\u044f\\u043c \\u0434\\u043b\\u044f \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0430 where, \\u0434\\u043b\\u044f \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u0438\\u0440\\u043e\\u0432\\u043a\\u0438 \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438 pdoFetch\\n\\t\\t\\t\\n\\t\\t\\t\\n\\t\\t\\t$setConfigArray[\'parents\'] = $objectsTypesDataArray[\'parent\']; \\/\\/ id \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f\\n\\t\\t\\t$setConfigArray[\'includeTVs\'] = $includeTVs; \\/\\/ tv \\u043f\\u043e\\u043b\\u044f\\n\\t\\t\\t$setConfigArray[\'where\'] = $setConfigWhere; \\/\\/ \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438\\n\\t\\t\\t$setConfigArray[\'return\'] = \'data\';\\n\\t\\t\\t\\n\\t\\t\\t$pdoFetch->setConfig($setConfigArray); \\/\\/ \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0432 pdoFetch\\n\\t\\t\\t\\n\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ] = $pdoFetch->run(); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430\\u043c\\u0438 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\n\\t\\t\\tif(is_array($geoObjectsArray[$i][ $objectsTypesKeyId ]) AND count($geoObjectsArray[$i][ $objectsTypesKeyId ])) {\\n\\t\\t\\t\\tfor($a=0; $a<count( $geoObjectsArray[$i][ $objectsTypesKeyId ] ); $a++)\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] == \'\') {\\n\\t\\t\\t\\t\\t\\tif($tvAddress != \'\') {\\n\\t\\t\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvAddress ] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$xmlContentCoordsFromYndexMaps = file_get_contents(\\"http:\\/\\/geocode-maps.yandex.ru\\/1.x\\/?geocode=\\".urlencode($addressPrefix.$resTvAddress).\\"&results=200\\"); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c xml \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0443 \\u0441 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u0430\\u043c\\u0438 \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445\\n\\t\\t\\t\\t\\t\\t\\t\\tpreg_match(\'\\/<pos>(.*?)<\\\\\\/pos>\\/\', $xmlContentCoordsFromYndexMaps, $posCoords); \\/\\/ \\u0432\\u044b\\u0440\\u0435\\u0437\\u0430\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0435 \\u043d\\u0430\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\t\\t\\t$resTvCoordsArray = explode(\' \', trim(strip_tags($posCoords[1])));\\n\\t\\t\\t\\t\\t\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] = $resTvCoords = $resTvCoordsArray[1].\',\'.$resTvCoordsArray[0]; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj = $modx->getObject(\'modResource\', array( \'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\'] ) ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u0435\\u0433\\u043e TV\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj->setTVValue($tvCoords, $resTvCoords); \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 tv \\u043f\\u043e\\u043b\\u0435 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj->save();\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\t\\t$balloonContent=\'\';\\n\\t\\t\\t\\t\\tif($fieldForBalloonContent != \'\') {\\n\\t\\t\\t\\t\\t\\t$balloonContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForBalloonContent ];\\n\\t\\t\\t\\t\\t\\tif($showMoreLink) {\\n\\t\\t\\t\\t\\t\\t\\t$balloonContent .= $pdo->getChunk($showMoreLinkTpl, array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\']\\n\\t\\t\\t\\t\\t\\t\\t\\t));\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\t\\t$hintContent=\'\';\\n\\t\\t\\t\\t\\tif($fieldForHint != \'\') {\\n\\t\\t\\t\\t\\t\\t$hintContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForHint ];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d \\u043b\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 2 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u044b\\u0435, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043d\\u0438\\u0436\\u0435\\n\\t\\t\\t\\t\\t\\tlist($coord_1, $coord_2) = explode(\',\', $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] );\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"preset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"icon\\")\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray = array();\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray=array();\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0442\\u0435\\u043a\\u0441\\u0442\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'balloonContent\'] = $balloonContent;\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'hintContent\'] = $hintContent;\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tforeach($subFiltersArray[ $objectsTypesKeyId ] as $iconOrPresetKey => $iconOrPresetArray)\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tfor($o=0; $o<count($iconOrPresetArray); $o++)\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'val\'] == $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetKey ] ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'icon\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $iconOrPresetArray[$o][\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\telse if( $iconOrPresetArray[$o][\'preset\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $iconOrPresetArray[$o][\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'presetText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $iconOrPresetArray[$o][\'presetText\'];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\telse if( $iconOrPresetArray[$o][\'presetFieldText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetArray[$o][\'presetFieldText\'] ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetArray[$o][\'presetFieldText\'] ];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043d\\u0435 \\u043f\\u0443\\u0441\\u0442 \\u043b\\u0438 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432.. \\u0435\\u0441\\u043b\\u0438 \\u043f\\u0443\\u0441\\u0442, \\u0442\\u043e \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\\u043d\\u0443\\u044e \\u0434\\u043b\\u044f \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f \\u044d\\u0442\\u0438\\u0445 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\tif(!count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t\\t\\tif( $objectsTypesDataArray[\'icon\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $objectsTypesDataArray[\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\telse if( $objectsTypesDataArray[\'preset\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $objectsTypesDataArray[\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\t\\t\\tif( $objectsTypesDataArray[\'presetText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $objectsTypesDataArray[\'presetText\'];\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\telse if( $objectsTypesDataArray[\'presetFieldText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $objectsTypesDataArray[\'presetFieldText\'] ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $objectsTypesDataArray[\'presetFieldText\'] ];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"preset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"icon\\")\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ >> \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\t\\t\\tif(count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t\\t\\t$geoObjectsForYandexMapArray[] = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Feature\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'geometry\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Point\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'coordinates\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_1,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_2\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'properties\' => $objectPropertiesArray,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'options\' => $objectMarkerArray,\\n\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\/\\/ << \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d \\u043b\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n}\\n\\/\\/ >> \\u041e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\nif( isset($id) AND !count($geoObjectsForYandexMapArray) ) {\\n\\t$oneObject = true;\\n\\t$i=0;\\n\\t$objectsTypesKeyId = \'OneObject\';\\n\\t\\n\\t$includeTVs = \'\';\\n\\t$includeTVs .= ( $tvAddress==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvAddress );\\n\\t$includeTVs .= ( $tvCoords==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvCoords );\\n\\t\\n\\t$setConfigArray[\'includeTVs\'] = $includeTVs; \\/\\/ tv \\u043f\\u043e\\u043b\\u044f\\n\\t$setConfigArray[\'where\'] = array( \'id\' => $id ); \\/\\/ \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438\\n\\t$setConfigArray[\'return\'] = \'data\';\\n\\t\\n\\t$pdoFetch->setConfig($setConfigArray); \\/\\/ \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0432 pdoFetch\\n\\t\\n\\t$geoObjectsArray[$i][ $objectsTypesKeyId ] = $pdoFetch->run(); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\n\\tif(is_array($geoObjectsArray[$i][ $objectsTypesKeyId ]) AND count($geoObjectsArray[$i][ $objectsTypesKeyId ])) {\\n\\t\\tfor($a=0; $a<count( $geoObjectsArray[$i][ $objectsTypesKeyId ] ); $a++)\\n\\t\\t{\\n\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] == \'\') {\\n\\t\\t\\t\\tif($tvAddress != \'\') {\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvAddress ] != \'\') {\\n\\t\\t\\t\\t\\t\\t$xmlContentCoordsFromYndexMaps = file_get_contents(\\"http:\\/\\/geocode-maps.yandex.ru\\/1.x\\/?geocode=\\".urlencode($addressPrefix.$resTvAddress).\\"&results=200\\"); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c xml \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0443 \\u0441 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u0430\\u043c\\u0438 \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445\\n\\t\\t\\t\\t\\t\\tpreg_match(\'\\/<pos>(.*?)<\\\\\\/pos>\\/\', $xmlContentCoordsFromYndexMaps, $posCoords); \\/\\/ \\u0432\\u044b\\u0440\\u0435\\u0437\\u0430\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0435 \\u043d\\u0430\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\t$resTvCoordsArray = explode(\' \', trim(strip_tags($posCoords[1])));\\n\\t\\t\\t\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] = $resTvCoords = $resTvCoordsArray[1].\',\'.$resTvCoordsArray[0]; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e\\n\\t\\t\\t\\t\\t\\t$resObj = $modx->getObject(\'modResource\', array( \'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\'] ) ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u0435\\u0433\\u043e TV\\n\\t\\t\\t\\t\\t\\t$resObj->setTVValue($tvCoords, $resTvCoords); \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 tv \\u043f\\u043e\\u043b\\u0435 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\n\\t\\t\\t\\t\\t\\t$resObj->save();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t$balloonContent=\'\';\\n\\t\\t\\tif($fieldForBalloonContent != \'\') {\\n\\t\\t\\t\\t$balloonContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForBalloonContent ];\\n\\t\\t\\t\\tif($showMoreLink) {\\n\\t\\t\\t\\t\\t$balloonContent .= $pdo->getChunk($showMoreLinkTpl, array(\\n\\t\\t\\t\\t\\t\\t\\t\'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\']\\n\\t\\t\\t\\t\\t\\t));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t$hintContent=\'\';\\n\\t\\t\\tif($fieldForHint != \'\') {\\n\\t\\t\\t\\t$hintContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForHint ];\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u043b\\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] != \'\') {\\n\\t\\t\\t\\t\\/\\/ \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 2 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u044b\\u0435, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043d\\u0438\\u0436\\u0435\\n\\t\\t\\t\\tlist($coord_1, $coord_2) = explode(\',\', $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] );\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerPreset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerIcon\\")\\n\\t\\t\\t\\t$objectPropertiesArray = array();\\n\\t\\t\\t\\t$objectMarkerArray=array();\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0442\\u0435\\u043a\\u0441\\u0442\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430\\n\\t\\t\\t\\t$objectPropertiesArray[\'balloonContent\'] = $balloonContent;\\n\\t\\t\\t\\t$objectPropertiesArray[\'hintContent\'] = $hintContent;\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043d\\u0435 \\u043f\\u0443\\u0441\\u0442 \\u043b\\u0438 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432.. \\u0435\\u0441\\u043b\\u0438 \\u043f\\u0443\\u0441\\u0442, \\u0442\\u043e \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\\u043d\\u0443\\u044e \\u0434\\u043b\\u044f \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f \\u044d\\u0442\\u0438\\u0445 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\t\\t\\t\\tif(!count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\tif( $markerIcon != \'\') {\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $markerIcon,\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse if( $markerPreset != \'\') {\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $markerPreset,\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\tif( $markerPresetText != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $markerPresetText;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\telse if( $markerPresetFieldText != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $markerPresetFieldText ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $markerPresetFieldText ];\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerPreset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerIcon\\")\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\tif(count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t$geoObjectsForYandexMapArray[] = array(\\n\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Feature\',\\n\\t\\t\\t\\t\\t\\t\\t\'geometry\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Point\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'coordinates\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_1,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_2\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\'properties\' => $objectPropertiesArray,\\n\\t\\t\\t\\t\\t\\t\\t\'options\' => $objectMarkerArray,\\n\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ << \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u043b\\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t}\\n\\t}\\n}\\n\\/\\/ << \\u041e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n\\/\\/print_r( $geoObjectsArray ); die;\\n\\/\\/print_r( $geoObjectsForYandexMapArray ); die;\\n\\/\\/print_r( $objectMarkerArray ); die;\\n\\/\\/print_r( $modx->toJSON( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ) ); die;\\n\\/\\/print_r( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ); die;\\n\\n\\n\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441 \\u043a \\u0441\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442\\u0443 \\u0431\\u044b\\u043b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u043f\\u0440\\u0438\\u043d\\u0442\\u0438\\u043c JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0434\\u043b\\u044f \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441 \\u041a\\u0430\\u0440\\u0442\\u044b \\u0438 \\u0443\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440 \\u0432\\u0441\\u0435\\u0433\\u043e \\u043e\\u0441\\u0442\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e\\nif(isset($_REQUEST[\'ym\']) OR $_REQUEST[\'ymJSON\']) {\\n\\t\\/\\/print_r( json_encode( array(\'type\' => \'FeatureCollection\', \'features\' => str_replace(\'\\"\',\\"\'\\",$geoObjectsForYandexMapArray) ) , JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE ) );\\n\\tprint_r( $modx->toJSON( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ) );\\n\\tdie;\\n}\\n\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441 \\u043a \\u0441\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442\\u0443 \\u0431\\u044b\\u043b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u043f\\u0440\\u0438\\u043d\\u0442\\u0438\\u043c JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0434\\u043b\\u044f \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441 \\u041a\\u0430\\u0440\\u0442\\u044b \\u0438 \\u0443\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440 \\u0432\\u0441\\u0435\\u0433\\u043e \\u043e\\u0441\\u0442\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e\\n\\n\\n\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u0438 \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$filterItemsWrapper=\'\';\\nif(count($objectsTypes)) {\\n\\t\\/\\/print_r( $objectsTypes ); die;\\n\\t\\n\\tfor($i=0; $i<count($objectsTypes); $i++)\\n\\t{\\n\\t\\t$filterItems=\'\';\\n\\t\\tforeach($objectsTypes[$i] as $objectsTypesKeyId => $objectsTypesDataArray)\\n\\t\\t{\\n\\t\\t\\t$filterChildItemsWrapper=\'\';\\n\\t\\t\\tforeach($objectsTypesDataArray[\'subFilters\'] as $subFiltersKeyId => $subFiltersDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\t$filterChildItems=\'\';\\n\\t\\t\\t\\tif($subFiltersDataArray[\'type\'] == \'tv\' OR !isset($subFiltersDataArray[\'type\'])) {\\n\\t\\t\\t\\t\\tfor($v=0; $v<count( $subFiltersDataArray[\'options\'] ); $v++)\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$tvFilterData = explode(\'==\', $subFiltersDataArray[\'options\'][$v][\'value\'] ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430 TV, \\u043d\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u044f \\u043d\\u0430 \\u0442\\u043e, \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d\\u043e \\u043e\\u043d\\u043e \\u0441 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043b\\u0438\\u0442\\u0435\\u043b\\u0435\\u043c \\"==\\" \\u0438\\u043b\\u0438 \\u0431\\u0435\\u0437 \\u043d\\u0435\\u0433\\u043e\\n\\t\\t\\t\\t\\t\\t$tvFilterVal = ( isset($tvFilterData[1]) ? $tvFilterData[1] : $tvFilterData[0] );\\n\\t\\t\\t\\t\\t\\t$tvFilterTitle = $tvFilterData[0];\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$itemInputValue = 1;\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u043f\\u043e\\u0442\\u043e\\u043c\\u043a\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\t$tplFiltersItemsParams = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'wrapper\' => \'\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'idFilterItem\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'idSubFilterItem\' => ucfirst($subFiltersKeyId) . $tvFilterVal ,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'inputSufixName\' => \'[\' . $objectsTypesKeyId . \'][\' . $subFiltersKeyId . \'][\' . $tvFilterVal . \']\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemTitle\' => $tvFilterTitle,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemValue\' => $tvFilterVal,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemInputValue\' => $itemInputValue,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classHideOrShow\' => ( $itemInputValue ? \'ymFiltersItemHide\' : \'ymFiltersItemShow\' ),\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$filterChildItems .= $pdo->getChunk($tplFiltersItems, $tplFiltersItemsParams);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif($filterChildItems != \'\') {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u043f\\u043e\\u0442\\u043e\\u043c\\u043a\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\t$tplFiltersItemsWrapperParams = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'wrapper\' => $filterChildItems,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'filterId\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'subFilterId\' => ucfirst($subFiltersKeyId),\\n\\t\\t\\t\\t\\t\\t\\t\\t\'title\' => $subFiltersDataArray[\'title\'],\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$filterChildItemsWrapper .= $pdo->getChunk($tplFiltersItemsWrapper, $tplFiltersItemsWrapperParams);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r($filterChildItemsWrapper); die;\\n\\t\\t\\t\\n\\t\\t\\t$itemInputValue = 1;\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439\\n\\t\\t\\t$tplFiltersItemsParams = array(\\n\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\'wrapper\' => $filterChildItemsWrapper,\\n\\t\\t\\t\\t\\t\'idFilterItem\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\'idSubFilterItem\' => \'\',\\n\\t\\t\\t\\t\\t\'inputSufixName\' => \'[\' . $objectsTypesKeyId . \'][val]\',\\n\\t\\t\\t\\t\\t\'itemTitle\' => $objectsTypesDataArray[\'title\'],\\n\\t\\t\\t\\t\\t\'itemValue\' => $objectsTypesDataArray[\'parent\'],\\n\\t\\t\\t\\t\\t\'itemInputValue\' => $itemInputValue,\\n\\t\\t\\t\\t\\t\'classHideOrShow\' => ( $itemInputValue ? \'ymFiltersItemHide\' : \'ymFiltersItemShow\' ),\\n\\t\\t\\t\\t);\\n\\t\\t\\t\\n\\t\\t\\t$filterItems .= $pdo->getChunk($tplFiltersItems, $tplFiltersItemsParams);\\n\\t\\t}\\n\\t\\tif($filterItems != \'\') {\\n\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439\\n\\t\\t\\t$tplFiltersItemsWrapperParams = array(\\n\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\'wrapper\' => $filterItems,\\n\\t\\t\\t\\t\\t\'filterId\' => $i,\\n\\t\\t\\t\\t\\t\'subFilterId\' => \'\',\\n\\t\\t\\t\\t\\t\'title\' => \'\',\\n\\t\\t\\t\\t);\\n\\t\\t\\t\\n\\t\\t\\t$filterItemsWrapper .= $pdo->getChunk($tplFiltersItemsWrapper, $tplFiltersItemsWrapperParams);\\n\\t\\t}\\n\\t}\\n\\t\\/\\/print_r( $filterItemsWrapper ); die;\\n}\\n\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u0438 \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n\\n\\/\\/ >> \\u0420\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\"tpl\\"\\n$tplParams = array(\\n\\t\\t\'idMap\' => $idMap,\\n\\t\\t\'centerCoords\' => \'[\'.$centerCoords.\']\',\\n\\t\\t\'zoom\' => $zoom,\\n\\t\\t\'styleMapBlock\' => $styleMapBlock,\\n\\t\\t\'styleFiltersBlock\' => $styleFiltersBlock,\\n\\t\\t\'classMapBlock\' => $classMapBlock,\\n\\t\\t\'classFiltersBlock\' => $classFiltersBlock,\\n\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\'idFiltersForm\' => $idFiltersForm,\\n\\t\\t\'filtersFormItems\' => $filterItemsWrapper,\\n\\t);\\n\\nreturn $pdo->getChunk($tpl, $tplParams);\\n\\/\\/ << \\u0420\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\"tpl\\"","locked":0,"properties":"a:25:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:19:\\"yandexmaps_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.yandexMaps\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"tplFiltersItemsWrapper\\";a:7:{s:4:\\"name\\";s:22:\\"tplFiltersItemsWrapper\\";s:4:\\"desc\\";s:38:\\"yandexmaps_prop_tplFiltersItemsWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:34:\\"tpl.yandexMaps.filtersItemsWrapper\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"tplFiltersItems\\";a:7:{s:4:\\"name\\";s:15:\\"tplFiltersItems\\";s:4:\\"desc\\";s:31:\\"yandexmaps_prop_tplFiltersItems\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"tpl.yandexMaps.filtersItems\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"idMap\\";a:7:{s:4:\\"name\\";s:5:\\"idMap\\";s:4:\\"desc\\";s:21:\\"yandexmaps_prop_idMap\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"yandexMap\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"centerCoords\\";a:7:{s:4:\\"name\\";s:12:\\"centerCoords\\";s:4:\\"desc\\";s:28:\\"yandexmaps_prop_centerCoords\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:36:\\"55.753565715196416,37.62001016381833\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"zoom\\";a:7:{s:4:\\"name\\";s:4:\\"zoom\\";s:4:\\"desc\\";s:20:\\"yandexmaps_prop_zoom\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:14;s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvCoords\\";a:7:{s:4:\\"name\\";s:8:\\"tvCoords\\";s:4:\\"desc\\";s:24:\\"yandexmaps_prop_tvCoords\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tvAddress\\";a:7:{s:4:\\"name\\";s:9:\\"tvAddress\\";s:4:\\"desc\\";s:25:\\"yandexmaps_prop_tvAddress\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"addressPrefix\\";a:7:{s:4:\\"name\\";s:13:\\"addressPrefix\\";s:4:\\"desc\\";s:29:\\"yandexmaps_prop_addressPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"objectsTypesJSON\\";a:7:{s:4:\\"name\\";s:16:\\"objectsTypesJSON\\";s:4:\\"desc\\";s:32:\\"yandexmaps_prop_objectsTypesJSON\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}i:10;a:7:{s:4:\\"name\\";i:10;s:4:\\"desc\\";s:0:\\"\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";a:4:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:18:\\"yandexmaps_prop_id\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"type\\";s:11:\\"numberfield\\";}s:7:\\"lexicon\\";N;s:4:\\"area\\";s:0:\\"\\";}s:10:\\"markerIcon\\";a:7:{s:4:\\"name\\";s:10:\\"markerIcon\\";s:4:\\"desc\\";s:26:\\"yandexmaps_prop_markerIcon\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"markerPreset\\";a:7:{s:4:\\"name\\";s:12:\\"markerPreset\\";s:4:\\"desc\\";s:28:\\"yandexmaps_prop_markerPreset\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"islands#redDotIcon\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"markerPresetText\\";a:7:{s:4:\\"name\\";s:16:\\"markerPresetText\\";s:4:\\"desc\\";s:32:\\"yandexmaps_prop_markerPresetText\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"markerPresetFieldText\\";a:7:{s:4:\\"name\\";s:21:\\"markerPresetFieldText\\";s:4:\\"desc\\";s:37:\\"yandexmaps_prop_markerPresetFieldText\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"fieldForBalloonContent\\";a:7:{s:4:\\"name\\";s:22:\\"fieldForBalloonContent\\";s:4:\\"desc\\";s:38:\\"yandexmaps_prop_fieldForBalloonContent\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:4:\\"text\\";s:0:\\"\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"content\\";s:5:\\"value\\";s:7:\\"content\\";}i:2;a:2:{s:4:\\"text\\";s:9:\\"introtext\\";s:5:\\"value\\";s:9:\\"introtext\\";}i:3;a:2:{s:4:\\"text\\";s:11:\\"description\\";s:5:\\"value\\";s:11:\\"description\\";}i:4;a:2:{s:4:\\"text\\";s:9:\\"longtitle\\";s:5:\\"value\\";s:9:\\"longtitle\\";}i:5;a:2:{s:4:\\"text\\";s:9:\\"pagetitle\\";s:5:\\"value\\";s:9:\\"pagetitle\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"fieldForHint\\";a:7:{s:4:\\"name\\";s:12:\\"fieldForHint\\";s:4:\\"desc\\";s:28:\\"yandexmaps_prop_fieldForHint\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:4:\\"text\\";s:0:\\"\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:9:\\"introtext\\";s:5:\\"value\\";s:9:\\"introtext\\";}i:2;a:2:{s:4:\\"text\\";s:11:\\"description\\";s:5:\\"value\\";s:11:\\"description\\";}i:3;a:2:{s:4:\\"text\\";s:9:\\"menutitle\\";s:5:\\"value\\";s:9:\\"menutitle\\";}i:4;a:2:{s:4:\\"text\\";s:9:\\"longtitle\\";s:5:\\"value\\";s:9:\\"longtitle\\";}i:5;a:2:{s:4:\\"text\\";s:9:\\"pagetitle\\";s:5:\\"value\\";s:9:\\"pagetitle\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"showMoreLink\\";a:7:{s:4:\\"name\\";s:12:\\"showMoreLink\\";s:4:\\"desc\\";s:28:\\"yandexmaps_prop_showMoreLink\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showMoreLinkTpl\\";a:7:{s:4:\\"name\\";s:15:\\"showMoreLinkTpl\\";s:4:\\"desc\\";s:31:\\"yandexmaps_prop_showMoreLinkTpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:76:\\"@INLINE <p><a href=\\"[[~[[+id]]]]\\" target=\\"_blank\\">\\u041f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435<\\/a><\\/p>\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"classMapBlock\\";a:7:{s:4:\\"name\\";s:13:\\"classMapBlock\\";s:4:\\"desc\\";s:29:\\"yandexmaps_prop_classMapBlock\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"ymBlock\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"styleMapBlock\\";a:7:{s:4:\\"name\\";s:13:\\"styleMapBlock\\";s:4:\\"desc\\";s:29:\\"yandexmaps_prop_styleMapBlock\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:35:\\"float:left; width:90%; height:100%;\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"idFiltersForm\\";a:7:{s:4:\\"name\\";s:13:\\"idFiltersForm\\";s:4:\\"desc\\";s:29:\\"yandexmaps_prop_idFiltersForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"ymFiltersForm\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"classFiltersBlock\\";a:7:{s:4:\\"name\\";s:17:\\"classFiltersBlock\\";s:4:\\"desc\\";s:33:\\"yandexmaps_prop_classFiltersBlock\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"ymFiltersBlock\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"styleFiltersBlock\\";a:7:{s:4:\\"name\\";s:17:\\"styleFiltersBlock\\";s:4:\\"desc\\";s:33:\\"yandexmaps_prop_styleFiltersBlock\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:35:\\"float:left; width:10%; height:100%;\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"classFiltersItem\\";a:7:{s:4:\\"name\\";s:16:\\"classFiltersItem\\";s:4:\\"desc\\";s:32:\\"yandexmaps_prop_classFiltersItem\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:13:\\"ymFiltersItem\\";s:7:\\"lexicon\\";s:21:\\"yandexmaps:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/yandexmaps\\/elements\\/snippets\\/snippet.yandexMaps.php","content":"\\/\\/ \\u0421\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442 Yandex-\\u041a\\u0430\\u0440\\u0442\\u0430 \\u0441\\u043e \\u0441\\u0432\\u043e\\u0438\\u043c\\u0438 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438-\\u043c\\u0430\\u0440\\u043a\\u0435\\u0440\\u0430\\u043c\\u0438 + \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u043f\\u043e \\u043a\\u043b\\u0438\\u043a\\u0443 \\u043e\\u0442\\u043a\\u043b\\u044e\\u0447\\u0430\\u0442\\u044c \\u043e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0451\\u043d\\u043d\\u044b\\u0435 \\u0442\\u0438\\u043f\\u044b \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\n$YandexMaps = $modx->getService(\'yandexmaps\',\'YandexMaps\',$modx->getOption(\'yandexmaps_core_path\',null,$modx->getOption(\'core_path\').\'components\\/yandexmaps\\/\').\'model\\/yandexmaps\\/\',$scriptProperties);\\n$YandexMaps->initialize($modx->context->key, $scriptProperties);\\n\\n\\/\\/ \\u041f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0430\\u0435\\u043c pdoTools \\u0438 pdoFetch\\n$pdo = $modx->getService(\'pdoTools\');\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\nif(!is_object($pdo)) { return \'[[%yandexmaps_pdotools_install]]\'; }\\n\\n\\/* >> \\u041f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b *\\/\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.yandexMaps\'); \\/\\/ \\u043e\\u0441\\u043d\\u043e\\u0432\\u043d\\u043e\\u0439 \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d\\n$tplFiltersItemsWrapper = $modx->getOption(\'tplFiltersItemsWrapper\', $scriptProperties, \'tpl.yandexMaps.filtersItemsWrapper\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0430 \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$tplFiltersItems = $modx->getOption(\'tplFiltersItems\', $scriptProperties, \'tpl.yandexMaps.filtersItems\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0432\\u044b\\u0432\\u043e\\u0434\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f\\/\\u0441\\u043a\\u0440\\u044b\\u0442\\u0438\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n$idMap = $modx->getOption(\'idMap\', $scriptProperties, \'yandexMap\'); \\/\\/ id \\u043a\\u0430\\u0440\\u0442\\u044b \\u0434\\u043b\\u044f html \\u0440\\u0430\\u0437\\u043c\\u0435\\u0442\\u043a\\u0438 \\u0438 JS \\u0438\\u043d\\u0438\\u0446\\u0438\\u0430\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\\n$centerCoords = $modx->getOption(\'centerCoords\', $scriptProperties, \'55.753565715196416,37.62001016381833\'); \\/\\/ \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0434\\u043b\\u044f \\u0446\\u0435\\u043d\\u0442\\u0440\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$zoom = $modx->getOption(\'zoom\', $scriptProperties, \'14\'); \\/\\/ \\u0437\\u0443\\u043c (\\u043f\\u0440\\u0438\\u0431\\u043b\\u0438\\u0436\\u0435\\u043d\\u0438\\u0435)\\n$addressPrefix = $modx->getOption(\'addressPrefix\', $scriptProperties, \'\'); \\/\\/ \\u043f\\u0440\\u0435\\u0444\\u0438\\u043a\\u0441 \\u0432 \\u043d\\u0430\\u0447\\u0430\\u043b\\u043e \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430.. \\u0432 \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u0435\\u0441\\u043b\\u0438 \\u0432 TV \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u0431\\u0435\\u0437 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u0438\\u044f \\u0441\\u0442\\u0440\\u0430\\u043d\\u044b \\u0438 \\u0433\\u043e\\u0440\\u043e\\u0434\\u0430\\n$tvAddress = $modx->getOption(\'tvAddress\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043c\\u044f TV \\u043f\\u043e\\u043b\\u044f, \\u0432 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u043c \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d \\u0430\\u0434\\u0440\\u0435\\u0441\\n$tvCoords = $modx->getOption(\'tvCoords\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043c\\u044f TV \\u043f\\u043e\\u043b\\u044f \\u0441 \\u0442\\u0438\\u043f\\u043e\\u043c yandexMaps (\\u0432 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u0431\\u0443\\u0434\\u0435\\u043c \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n\\n$objectsTypesJSON = $modx->getOption(\'objectsTypesJSON\', $scriptProperties, \'\'); \\/\\/ JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0430 \\u0441 \\u0442\\u0438\\u043f\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432, \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044c\\u0441\\u043a\\u0438\\u043c\\u0438 id, \\u0442\\u0430\\u0439\\u0442\\u043b\\u0430\\u043c\\u0438, \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u0438\\u043b\\u0438 \\u043f\\u0440\\u0435\\u0441\\u0435\\u0442\\u0430\\u043c\\u0438, \\u0430 \\u0442\\u0430\\u043a\\u0436\\u0435 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 \\u043f\\u043e TV (\\u0438 \\u043d\\u0430\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043a\\u0430\\u0436\\u0434\\u043e\\u043c\\u0443 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043d\\u0442\\u0443 \\u043e\\u0442\\u0432\\u0435\\u0442\\u0430 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0438 \\u0438\\u043b\\u0438 \\u043f\\u0440\\u0435\\u0441\\u0435\\u0442\\u0430)\\n\\n$id = $modx->getOption(\'id\', $scriptProperties, $modx->resource->get(\'id\') ); \\/\\/ id \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0434\\u043b\\u044f \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430 \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$markerIcon = $modx->getOption(\'markerIcon\', $scriptProperties, \'\'); \\/\\/ \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 \\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 (\\u043d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440: \\"\\/images\\/map_marker.png\\")\\n$markerPreset = $modx->getOption(\'markerPreset\', $scriptProperties, \'islands#redDotIcon\'); \\/\\/ \\u043a\\u043b\\u044e\\u0447 \\u0441\\u0442\\u0438\\u043b\\u044f \\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 (\\u043d\\u0430\\u043f\\u0440\\u0438\\u043c\\u0435\\u0440: \\"islands#redClusterIcons\\" \\u0438\\u043b\\u0438 \\"islands#violetDotIcon\\")\\n$markerPresetText = $modx->getOption(\'markerPresetText\', $scriptProperties, \'\'); \\/\\/ \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset (\\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n$markerPresetFieldText = $modx->getOption(\'markerPresetFieldText\', $scriptProperties, \'\'); \\/\\/ \\u043f\\u043e\\u043b\\u0435, \\u043e\\u0442\\u043a\\u0443\\u0434\\u0430 \\u0438\\u0437\\u0432\\u043b\\u0435\\u043a\\u0430\\u0442\\u044c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset (\\u0434\\u043b\\u044f \\u043e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u043e\\u0433\\u043e \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430)\\n\\n$fieldForBalloonContent = $modx->getOption(\'fieldForBalloonContent\', $scriptProperties, \'\'); \\/\\/ \\u043a\\u0430\\u043a\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f \\u0432 balloon (content, introtext, description, longtitle, pagetitle)\\n$fieldForHint = $modx->getOption(\'fieldForHint\', $scriptProperties, \'\'); \\/\\/ \\u043a\\u0430\\u043a\\u043e\\u0435 \\u043f\\u043e\\u043b\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438 \\u043f\\u0440\\u0438 \\u043d\\u0430\\u0432\\u0435\\u0434\\u0435\\u043d\\u0438\\u0438 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 (introtext, description, menutitle, longtitle, pagetitle)\\n$showMoreLink = $modx->getOption(\'showMoreLink\', $scriptProperties, false); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044c \\u043b\\u0438 \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\" \\u043d\\u0430 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 \\u0432 \\u043a\\u043e\\u043d\\u0435\\u0446 \\u0442\\u0435\\u043a\\u0441\\u0442\\u0430 \\u0432 balloonContent\\n$showMoreLinkTpl = $modx->getOption(\'showMoreLinkTpl\', $scriptProperties, \'@INLINE <p><a href=\\"[[~[[+id]]]]\\" target=\\"_blank\\">\\u041f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435<\\/a><\\/p>\'); \\/\\/ \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d \\u0441\\u0441\\u044b\\u043b\\u043a\\u0438 (\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435) \\u043d\\u0430 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441 \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f \\u0432 balloon\\n\\n$classMapBlock = $modx->getOption(\'classMapBlock\', $scriptProperties, \'ymBlock\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$styleMapBlock = $modx->getOption(\'styleMapBlock\', $scriptProperties, \'float:left; width:90%; height:100%;\'); \\/\\/ \\u0441\\u0442\\u0438\\u043b\\u044c \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u043a\\u0430\\u0440\\u0442\\u044b\\n$idFiltersForm = $modx->getOption(\'idFiltersForm\', $scriptProperties, \'ymFiltersForm\'); \\/\\/ id \\u0434\\u043b\\u044f \\u0444\\u043e\\u0440\\u043c\\u044b \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$classFiltersBlock = $modx->getOption(\'classFiltersBlock\', $scriptProperties, \'ymFiltersBlock\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$styleFiltersBlock = $modx->getOption(\'styleFiltersBlock\', $scriptProperties, \'float:left; width:10%; height:100%;\'); \\/\\/ \\u0441\\u0442\\u0438\\u043b\\u044c \\u0434\\u043b\\u044f \\u0431\\u043b\\u043e\\u043a\\u0430 \\u0441\\u0441\\u044b\\u043b\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n$classFiltersItem = $modx->getOption(\'classFiltersItem\', $scriptProperties, \'ymFiltersItem\'); \\/\\/ \\u043a\\u043b\\u0430\\u0441\\u0441 \\u0434\\u043b\\u044f \\u0441\\u0441\\u044b\\u043b\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430 (\\u0432\\u043a\\u043b\\/\\u0432\\u044b\\u043a\\u043b) \\u0433\\u0435\\u043e-\\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 (\\u043d\\u0443\\u0436\\u0435\\u043d \\u0434\\u043b\\u044f \\u043e\\u0442\\u0441\\u043b\\u0435\\u0436\\u0438\\u0432\\u0430\\u043d\\u0438\\u044f \\u043a\\u043b\\u0438\\u043a\\u0430 JS\\u043e\\u043c)\\n\\/* << \\u041f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b *\\/\\n\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\nif($fieldForBalloonContent!=\'\') {\\n\\tif(\\t$fieldForBalloonContent==\'content\' OR \\n\\t\\t$fieldForBalloonContent==\'introtext\' OR \\n\\t\\t$fieldForBalloonContent==\'description\' OR \\n\\t\\t$fieldForBalloonContent==\'longtitle\' OR \\n\\t\\t$fieldForBalloonContent==\'pagetitle\'\\n\\t) { } else {\\n\\t\\t$fieldForBalloonContent = \'\';\\n\\t}\\n}\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u044f.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\n\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\nif($fieldForHint!=\'\') {\\n\\tif(\\t$fieldForHint==\'introtext\' OR \\n\\t\\t$fieldForHint==\'description\' OR \\n\\t\\t$fieldForHint==\'menutitle\' OR \\n\\t\\t$fieldForHint==\'longtitle\' OR \\n\\t\\t$fieldForHint==\'pagetitle\'\\n\\t) { } else {\\n\\t\\t$fieldForHint = \'\';\\n\\t}\\n}\\n\\/\\/ >> \\u041f\\u043e\\u043b\\u0435, \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0435 \\u043d\\u0443\\u0436\\u043d\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u0434\\u043b\\u044f \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0438.. \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f \\u043b\\u0438 \\u043e\\u043d\\u043e \\u043f\\u043e\\u0434\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u043c..\\n\\n\\nif($tvCoords == \'\') { \\/\\/ \\u0435\\u0441\\u043b\\u0438 \\u043d\\u0435 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b TV\\u0448\\u043a\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442 - \\u0434\\u0430\\u043b\\u044c\\u0448\\u0435 \\u043d\\u0435 \\u0438\\u0434\\u0451\\u043c..\\n\\treturn;\\n}\\n\\n\\n\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0438\\u0445 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\\u0435\\u0439\\u0448\\u0435\\u0439 \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b\\n$ymFormData=\'\';\\nif(isset($_REQUEST[\'ym\'])) {\\n\\t$ymFormData = $_REQUEST[\'ym\'];\\n\\t\\/\\/print_r( $ymFormData ); die;\\n}\\n\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u0435\\u0441\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0441 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0438\\u0445 \\u0434\\u043b\\u044f \\u0434\\u0430\\u043b\\u044c\\u043d\\u0435\\u0439\\u0448\\u0435\\u0439 \\u0440\\u0430\\u0431\\u043e\\u0442\\u044b\\n\\n\\n$oneObject=false;\\n\\n$geoObjectsArray=array();\\n$geoObjectsForYandexMapArray=array();\\n\\n\\nif($objectsTypesJSON != \'\') {\\n\\t$objectsTypes = $modx->fromJSON($objectsTypesJSON); \\/\\/ \\u0438\\u0437 json \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432\\n\\t\\/\\/print_r( $objectsTypes ); die;\\n\\t\\n\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\tfor($i=0; $i<count($objectsTypes); $i++)\\n\\t{\\n\\t\\tforeach($objectsTypes[$i] as $objectsTypesKeyId => $objectsTypesDataArray)\\n\\t\\t{\\n\\t\\t\\t$includeTVs = \'\';\\n\\t\\t\\t$includeTVs .= ( $tvAddress==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvAddress );\\n\\t\\t\\t$includeTVs .= ( $tvCoords==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvCoords );\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0420\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u043c \\u0441 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 (\\u043f\\u043e\\u043a\\u0430 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e tv \\u043f\\u043e\\u043b\\u044f)\\n\\t\\t\\tforeach($objectsTypesDataArray[\'subFilters\'] as $subFiltersKeyId => $subFiltersDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\tif($subFiltersDataArray[\'type\'] == \'tv\' OR !isset($subFiltersDataArray[\'type\'])) {\\n\\t\\t\\t\\t\\t$includeTVs .= ($includeTVs==\'\' ? \'\' : \',\') . $subFiltersKeyId; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c TV\\u0448\\u043a\\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e includeTVs, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a TV \\u0432 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0440\\u044b pdoFetch\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tfor($v=0; $v<count( $subFiltersDataArray[\'options\'] ); $v++)\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$tvFilterData = explode(\'==\', $subFiltersDataArray[\'options\'][$v][\'value\'] ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430 TV, \\u043d\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u044f \\u043d\\u0430 \\u0442\\u043e, \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d\\u043e \\u043e\\u043d\\u043e \\u0441 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043b\\u0438\\u0442\\u0435\\u043b\\u0435\\u043c \\"==\\" \\u0438\\u043b\\u0438 \\u0431\\u0435\\u0437 \\u043d\\u0435\\u0433\\u043e\\n\\t\\t\\t\\t\\t\\t$tvFilterVal = ( isset($tvFilterData[1]) ? $tvFilterData[1] : $tvFilterData[0] );\\n\\t\\t\\t\\t\\t\\t$tvFilterTitle = $tvFilterData[0];\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0444\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u044b\\u043c\\u0438 TV \\u043f\\u043e\\u043b\\u044f\\u043c\\u0438 \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\\n\\t\\t\\t\\t\\t\\t$subFiltersArray[ $objectsTypesKeyId ][ $subFiltersKeyId ][] = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'val\' => $tvFilterVal,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'icon\' => $subFiltersDataArray[\'options\'][$v][\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $subFiltersDataArray[\'options\'][$v][\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'presetText\' => $subFiltersDataArray[\'options\'][$v][\'presetText\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\'presetFieldText\' => $subFiltersDataArray[\'options\'][$v][\'presetFieldText\'],\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r( $subFiltersArray ); die;\\n\\t\\t\\t\\/\\/print_r( $includeTVs ); die;\\n\\t\\t\\t\\/\\/ << \\u0420\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u043c \\u0441 \\u0441\\u0443\\u0431\\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u043c\\u0438 (\\u043f\\u043e\\u043a\\u0430 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e tv \\u043f\\u043e\\u043b\\u044f)\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043f\\u043e TV \\u043f\\u043e\\u043b\\u044f\\u043c \\u0434\\u043b\\u044f \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0430 where, \\u0434\\u043b\\u044f \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u0438\\u0440\\u043e\\u0432\\u043a\\u0438 \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438 pdoFetch\\n\\t\\t\\t$setConfigWhere=array();\\n\\t\\t\\tforeach($ymFormData as $ymFormDataType => $ymFormDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\tforeach($ymFormDataArray as $ymFormDataKeyId => $ymFormDataSubArray)\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tif($ymFormDataType == \'checkboxes\') {\\n\\t\\t\\t\\t\\t\\tif($ymFormDataKeyId == $objectsTypesKeyId) {\\n\\t\\t\\t\\t\\t\\t\\tif($ymFormDataSubArray[\'val\']) {\\n\\t\\t\\t\\t\\t\\t\\t\\tforeach($ymFormDataSubArray as $ymFormDataSubFieldKeyId => $ymFormDataSubFieldArray)\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif(is_array($ymFormDataSubFieldArray) AND count($ymFormDataSubFieldArray)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayIN=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayNotIN=array();\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tforeach($ymFormDataSubFieldArray as $key => $value)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif($value) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayIN[] = $key;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataArrayNotIN[] = $key;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif(count($dataArrayIN)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray[ \'TV\' . $ymFormDataSubFieldKeyId . \'.value:IN\' ] = $dataArrayIN;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif(count($dataArrayNotIN)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$dataWhereArray[ \'TV\' . $ymFormDataSubFieldKeyId . \'.value:NOT IN\' ] = $dataArrayNotIN;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$setConfigWhere[] = $dataWhereArray;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t\\t\\t$setConfigWhere = array( \'id\' => \'0\' ); \\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u044d\\u0442\\u043e, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043d\\u0435 \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0430\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u0442\\u0438\\u043f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432, \\u0432 \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435, \\u043a\\u043e\\u0433\\u0434\\u0430 \\u0443 \\u043d\\u0430\\u0441 \\u0432 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0435 \\u0433\\u0430\\u043b\\u043e\\u0447\\u043a\\u0430 \\u043e\\u0442\\u043c\\u0435\\u043d\\u0435\\u043d\\u0430\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r( $setConfigWhere ); die;\\n\\t\\t\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043f\\u043e TV \\u043f\\u043e\\u043b\\u044f\\u043c \\u0434\\u043b\\u044f \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0430 where, \\u0434\\u043b\\u044f \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u0438\\u0440\\u043e\\u0432\\u043a\\u0438 \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438 pdoFetch\\n\\t\\t\\t\\n\\t\\t\\t\\n\\t\\t\\t$setConfigArray[\'parents\'] = $objectsTypesDataArray[\'parent\']; \\/\\/ id \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f\\n\\t\\t\\t$setConfigArray[\'includeTVs\'] = $includeTVs; \\/\\/ tv \\u043f\\u043e\\u043b\\u044f\\n\\t\\t\\t$setConfigArray[\'where\'] = $setConfigWhere; \\/\\/ \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438\\n\\t\\t\\t$setConfigArray[\'return\'] = \'data\';\\n\\t\\t\\t\\n\\t\\t\\t$pdoFetch->setConfig($setConfigArray); \\/\\/ \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0432 pdoFetch\\n\\t\\t\\t\\n\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ] = $pdoFetch->run(); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430\\u043c\\u0438 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\n\\t\\t\\tif(is_array($geoObjectsArray[$i][ $objectsTypesKeyId ]) AND count($geoObjectsArray[$i][ $objectsTypesKeyId ])) {\\n\\t\\t\\t\\tfor($a=0; $a<count( $geoObjectsArray[$i][ $objectsTypesKeyId ] ); $a++)\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] == \'\') {\\n\\t\\t\\t\\t\\t\\tif($tvAddress != \'\') {\\n\\t\\t\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvAddress ] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$xmlContentCoordsFromYndexMaps = file_get_contents(\\"http:\\/\\/geocode-maps.yandex.ru\\/1.x\\/?geocode=\\".urlencode($addressPrefix.$resTvAddress).\\"&results=200\\"); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c xml \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0443 \\u0441 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u0430\\u043c\\u0438 \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445\\n\\t\\t\\t\\t\\t\\t\\t\\tpreg_match(\'\\/<pos>(.*?)<\\\\\\/pos>\\/\', $xmlContentCoordsFromYndexMaps, $posCoords); \\/\\/ \\u0432\\u044b\\u0440\\u0435\\u0437\\u0430\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0435 \\u043d\\u0430\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\t\\t\\t$resTvCoordsArray = explode(\' \', trim(strip_tags($posCoords[1])));\\n\\t\\t\\t\\t\\t\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] = $resTvCoords = $resTvCoordsArray[1].\',\'.$resTvCoordsArray[0]; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj = $modx->getObject(\'modResource\', array( \'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\'] ) ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u0435\\u0433\\u043e TV\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj->setTVValue($tvCoords, $resTvCoords); \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 tv \\u043f\\u043e\\u043b\\u0435 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\n\\t\\t\\t\\t\\t\\t\\t\\t$resObj->save();\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\t\\t$balloonContent=\'\';\\n\\t\\t\\t\\t\\tif($fieldForBalloonContent != \'\') {\\n\\t\\t\\t\\t\\t\\t$balloonContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForBalloonContent ];\\n\\t\\t\\t\\t\\t\\tif($showMoreLink) {\\n\\t\\t\\t\\t\\t\\t\\t$balloonContent .= $pdo->getChunk($showMoreLinkTpl, array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\']\\n\\t\\t\\t\\t\\t\\t\\t\\t));\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\t\\t$hintContent=\'\';\\n\\t\\t\\t\\t\\tif($fieldForHint != \'\') {\\n\\t\\t\\t\\t\\t\\t$hintContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForHint ];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\/\\/ >> \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d \\u043b\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 2 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u044b\\u0435, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043d\\u0438\\u0436\\u0435\\n\\t\\t\\t\\t\\t\\tlist($coord_1, $coord_2) = explode(\',\', $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] );\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"preset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"icon\\")\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray = array();\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray=array();\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0442\\u0435\\u043a\\u0441\\u0442\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'balloonContent\'] = $balloonContent;\\n\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'hintContent\'] = $hintContent;\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tforeach($subFiltersArray[ $objectsTypesKeyId ] as $iconOrPresetKey => $iconOrPresetArray)\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tfor($o=0; $o<count($iconOrPresetArray); $o++)\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'val\'] == $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetKey ] ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'icon\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $iconOrPresetArray[$o][\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\telse if( $iconOrPresetArray[$o][\'preset\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $iconOrPresetArray[$o][\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif( $iconOrPresetArray[$o][\'presetText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $iconOrPresetArray[$o][\'presetText\'];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\telse if( $iconOrPresetArray[$o][\'presetFieldText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetArray[$o][\'presetFieldText\'] ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $iconOrPresetArray[$o][\'presetFieldText\'] ];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043d\\u0435 \\u043f\\u0443\\u0441\\u0442 \\u043b\\u0438 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432.. \\u0435\\u0441\\u043b\\u0438 \\u043f\\u0443\\u0441\\u0442, \\u0442\\u043e \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\\u043d\\u0443\\u044e \\u0434\\u043b\\u044f \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f \\u044d\\u0442\\u0438\\u0445 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\tif(!count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t\\t\\tif( $objectsTypesDataArray[\'icon\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $objectsTypesDataArray[\'icon\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\telse if( $objectsTypesDataArray[\'preset\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $objectsTypesDataArray[\'preset\'],\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\t\\t\\tif( $objectsTypesDataArray[\'presetText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $objectsTypesDataArray[\'presetText\'];\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\telse if( $objectsTypesDataArray[\'presetFieldText\'] != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $objectsTypesDataArray[\'presetFieldText\'] ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $objectsTypesDataArray[\'presetFieldText\'] ];\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"preset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c. \\u0432 JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0435: \\"icon\\")\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ >> \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\t\\t\\tif(count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t\\t\\t$geoObjectsForYandexMapArray[] = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Feature\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'geometry\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Point\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\'coordinates\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_1,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_2\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'properties\' => $objectPropertiesArray,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'options\' => $objectMarkerArray,\\n\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\/\\/ << \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\/\\/ << \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d \\u043b\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ << \\u0421\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u0432 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n}\\n\\/\\/ >> \\u041e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\nif( isset($id) AND !count($geoObjectsForYandexMapArray) ) {\\n\\t$oneObject = true;\\n\\t$i=0;\\n\\t$objectsTypesKeyId = \'OneObject\';\\n\\t\\n\\t$includeTVs = \'\';\\n\\t$includeTVs .= ( $tvAddress==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvAddress );\\n\\t$includeTVs .= ( $tvCoords==\'\' ? \'\' : ($includeTVs==\'\' ? \'\' : \',\') . $tvCoords );\\n\\t\\n\\t$setConfigArray[\'includeTVs\'] = $includeTVs; \\/\\/ tv \\u043f\\u043e\\u043b\\u044f\\n\\t$setConfigArray[\'where\'] = array( \'id\' => $id ); \\/\\/ \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f \\u0432\\u044b\\u0431\\u043e\\u0440\\u043a\\u0438\\n\\t$setConfigArray[\'return\'] = \'data\';\\n\\t\\n\\t$pdoFetch->setConfig($setConfigArray); \\/\\/ \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b \\u0432 pdoFetch\\n\\t\\n\\t$geoObjectsArray[$i][ $objectsTypesKeyId ] = $pdoFetch->run(); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\n\\tif(is_array($geoObjectsArray[$i][ $objectsTypesKeyId ]) AND count($geoObjectsArray[$i][ $objectsTypesKeyId ])) {\\n\\t\\tfor($a=0; $a<count( $geoObjectsArray[$i][ $objectsTypesKeyId ] ); $a++)\\n\\t\\t{\\n\\t\\t\\t\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] == \'\') {\\n\\t\\t\\t\\tif($tvAddress != \'\') {\\n\\t\\t\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvAddress ] != \'\') {\\n\\t\\t\\t\\t\\t\\t$xmlContentCoordsFromYndexMaps = file_get_contents(\\"http:\\/\\/geocode-maps.yandex.ru\\/1.x\\/?geocode=\\".urlencode($addressPrefix.$resTvAddress).\\"&results=200\\"); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c xml \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0443 \\u0441 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u0430\\u043c\\u0438 \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445\\n\\t\\t\\t\\t\\t\\tpreg_match(\'\\/<pos>(.*?)<\\\\\\/pos>\\/\', $xmlContentCoordsFromYndexMaps, $posCoords); \\/\\/ \\u0432\\u044b\\u0440\\u0435\\u0437\\u0430\\u0435\\u043c \\u043d\\u0443\\u0436\\u043d\\u044b\\u0435 \\u043d\\u0430\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\n\\t\\t\\t\\t\\t\\t$resTvCoordsArray = explode(\' \', trim(strip_tags($posCoords[1])));\\n\\t\\t\\t\\t\\t\\t$geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] = $resTvCoords = $resTvCoordsArray[1].\',\'.$resTvCoordsArray[0]; \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0434\\u0430\\u043d\\u043d\\u044b\\u043c\\u0438 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u0438 \\u0432 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u0443\\u044e\\n\\t\\t\\t\\t\\t\\t$resObj = $modx->getObject(\'modResource\', array( \'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\'] ) ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 \\u0435\\u0433\\u043e TV\\n\\t\\t\\t\\t\\t\\t$resObj->setTVValue($tvCoords, $resTvCoords); \\/\\/ \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u0432 tv \\u043f\\u043e\\u043b\\u0435 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\n\\t\\t\\t\\t\\t\\t$resObj->save();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u0415\\u0441\\u043b\\u0438 tv \\u043f\\u043e\\u043b\\u0435 \\"\\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b\\" \\u043f\\u0443\\u0441\\u0442\\u043e \\u0443 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430, \\u0442\\u043e \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441.\\u041a\\u0430\\u0440\\u0442\\u0430\\u0445 \\u043f\\u043e tv \\u043f\\u043e\\u043b\\u044e \\"\\u0430\\u0434\\u0440\\u0435\\u0441\\" \\u0438 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u043c \\u0432 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t$balloonContent=\'\';\\n\\t\\t\\tif($fieldForBalloonContent != \'\') {\\n\\t\\t\\t\\t$balloonContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForBalloonContent ];\\n\\t\\t\\t\\tif($showMoreLink) {\\n\\t\\t\\t\\t\\t$balloonContent .= $pdo->getChunk($showMoreLinkTpl, array(\\n\\t\\t\\t\\t\\t\\t\\t\'id\' => $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][\'id\']\\n\\t\\t\\t\\t\\t\\t));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435.. \\u0434\\u043e\\u0431\\u0430\\u0432\\u043b\\u044f\\u0435\\u043c \\u0441\\u0441\\u044b\\u043b\\u043a\\u0443 \\"\\u043f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435\\"\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t$hintContent=\'\';\\n\\t\\t\\tif($fieldForHint != \'\') {\\n\\t\\t\\t\\t$hintContent = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $fieldForHint ];\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u043f\\u043e\\u0434\\u0441\\u043a\\u0430\\u0437\\u043a\\u0443\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ >> \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u043b\\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t\\tif($geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] != \'\') {\\n\\t\\t\\t\\t\\/\\/ \\u0440\\u0430\\u0437\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b \\u043d\\u0430 2 \\u043f\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u044b\\u0435, \\u0447\\u0442\\u043e\\u0431\\u044b \\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u043e \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0442\\u044c \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u043d\\u0438\\u0436\\u0435\\n\\t\\t\\t\\tlist($coord_1, $coord_2) = explode(\',\', $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $tvCoords ] );\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerPreset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerIcon\\")\\n\\t\\t\\t\\t$objectPropertiesArray = array();\\n\\t\\t\\t\\t$objectMarkerArray=array();\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ \\u0441\\u043e\\u0431\\u0438\\u0440\\u0430\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0442\\u0435\\u043a\\u0441\\u0442\\u043e\\u043c \\u0434\\u043b\\u044f \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430\\n\\t\\t\\t\\t$objectPropertiesArray[\'balloonContent\'] = $balloonContent;\\n\\t\\t\\t\\t$objectPropertiesArray[\'hintContent\'] = $hintContent;\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u043d\\u0435 \\u043f\\u0443\\u0441\\u0442 \\u043b\\u0438 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430\\u043c\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432.. \\u0435\\u0441\\u043b\\u0438 \\u043f\\u0443\\u0441\\u0442, \\u0442\\u043e \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\\u043d\\u0443\\u044e \\u0434\\u043b\\u044f \\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u044f \\u044d\\u0442\\u0438\\u0445 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432\\n\\t\\t\\t\\tif(!count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\tif( $markerIcon != \'\') {\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'iconLayout\' => \'default#image\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'iconImageHref\' => $markerIcon,\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse if( $markerPreset != \'\') {\\n\\t\\t\\t\\t\\t\\t$objectMarkerArray = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'preset\' => $markerPreset,\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0441\\u0442\\u0430\\u0432\\u0438\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u043d\\u0430 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0435\\n\\t\\t\\t\\t\\t\\tif( $markerPresetText != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $markerPresetText;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\telse if( $markerPresetFieldText != \'\') {\\n\\t\\t\\t\\t\\t\\t\\t\\/\\/ \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043b\\u0438 \\u043f\\u043e\\u043b\\u0435, \\u0438\\u0437 \\u043a\\u043e\\u0442\\u043e\\u0440\\u043e\\u0433\\u043e \\u043c\\u044b \\u0432\\u044b\\u0434\\u0435\\u0440\\u043d\\u0435\\u043c \\u0442\\u0435\\u043a\\u0441\\u0442 \\u0434\\u043b\\u044f preset\\n\\t\\t\\t\\t\\t\\t\\tif( isset( $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $markerPresetFieldText ] ) ) {\\n\\t\\t\\t\\t\\t\\t\\t\\t$objectPropertiesArray[\'iconContent\'] = $geoObjectsArray[$i][ $objectsTypesKeyId ][$a][ $markerPresetFieldText ];\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432 \\u0441 \\u043e\\u0431\\u043e\\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u0430 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435 - \\u0442\\u043e\\u0447\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerPreset\\") \\u0418\\u041b\\u0418 \\u0438\\u043a\\u043e\\u043d\\u043a\\u0430 (\\u043f\\u0430\\u0440\\u0430\\u043c.: \\"markerIcon\\")\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\/\\/ >> \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t\\tif(count($objectMarkerArray)) {\\n\\t\\t\\t\\t\\t$geoObjectsForYandexMapArray[] = array(\\n\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Feature\',\\n\\t\\t\\t\\t\\t\\t\\t\'geometry\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'type\' => \'Point\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\'coordinates\' => array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_1,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t(double) $coord_2\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t\\t\\t\'properties\' => $objectPropertiesArray,\\n\\t\\t\\t\\t\\t\\t\\t\'options\' => $objectMarkerArray,\\n\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\/\\/ << \\u0417\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u043c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0432 \\u043c\\u0430\\u0441\\u0441\\u0438\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0432 JSON \\u0444\\u043e\\u0440\\u043c\\u0430\\u0442\\u0435 \\u0432 \\u043a\\u0430\\u0440\\u0442\\u0443\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ << \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044f\\u0435\\u043c, \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u044b \\u043b\\u0438 \\u043a\\u043e\\u043e\\u0440\\u0434\\u0438\\u043d\\u0430\\u0442\\u044b, \\u0438 \\u0442\\u043e\\u043b\\u044c\\u043a\\u043e \\u0432 \\u044d\\u0442\\u043e\\u043c \\u0441\\u043b\\u0443\\u0447\\u0430\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u0451\\u043c \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u0434\\u043b\\u044f \\u043e\\u0442\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\t\\t}\\n\\t}\\n}\\n\\/\\/ << \\u041e\\u0434\\u0438\\u043d\\u043e\\u0447\\u043d\\u044b\\u0439 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n\\/\\/print_r( $geoObjectsArray ); die;\\n\\/\\/print_r( $geoObjectsForYandexMapArray ); die;\\n\\/\\/print_r( $objectMarkerArray ); die;\\n\\/\\/print_r( $modx->toJSON( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ) ); die;\\n\\/\\/print_r( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ); die;\\n\\n\\n\\/\\/ >> \\u0415\\u0441\\u043b\\u0438 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441 \\u043a \\u0441\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442\\u0443 \\u0431\\u044b\\u043b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u043f\\u0440\\u0438\\u043d\\u0442\\u0438\\u043c JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0434\\u043b\\u044f \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441 \\u041a\\u0430\\u0440\\u0442\\u044b \\u0438 \\u0443\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440 \\u0432\\u0441\\u0435\\u0433\\u043e \\u043e\\u0441\\u0442\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e\\nif(isset($_REQUEST[\'ym\']) OR $_REQUEST[\'ymJSON\']) {\\n\\t\\/\\/print_r( json_encode( array(\'type\' => \'FeatureCollection\', \'features\' => str_replace(\'\\"\',\\"\'\\",$geoObjectsForYandexMapArray) ) , JSON_UNESCAPED_SLASHES | JSON_UNESCAPED_UNICODE ) );\\n\\tprint_r( $modx->toJSON( array(\'type\' => \'FeatureCollection\', \'features\' => $geoObjectsForYandexMapArray ) ) );\\n\\tdie;\\n}\\n\\/\\/ << \\u0415\\u0441\\u043b\\u0438 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441 \\u043a \\u0441\\u043d\\u0438\\u043f\\u043f\\u0435\\u0442\\u0443 \\u0431\\u044b\\u043b \\u043f\\u0435\\u0440\\u0435\\u0434\\u0430\\u043d \\u0438\\u0437 \\u0444\\u043e\\u0440\\u043c\\u044b, \\u0442\\u043e \\u043f\\u0440\\u0438\\u043d\\u0442\\u0438\\u043c JSON \\u0441\\u0442\\u0440\\u043e\\u043a\\u0443 \\u0434\\u043b\\u044f \\u042f\\u043d\\u0434\\u0435\\u043a\\u0441 \\u041a\\u0430\\u0440\\u0442\\u044b \\u0438 \\u0443\\u0431\\u0438\\u0432\\u0430\\u0435\\u043c \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440 \\u0432\\u0441\\u0435\\u0433\\u043e \\u043e\\u0441\\u0442\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e\\n\\n\\n\\/\\/ >> \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u0438 \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n$filterItemsWrapper=\'\';\\nif(count($objectsTypes)) {\\n\\t\\/\\/print_r( $objectsTypes ); die;\\n\\t\\n\\tfor($i=0; $i<count($objectsTypes); $i++)\\n\\t{\\n\\t\\t$filterItems=\'\';\\n\\t\\tforeach($objectsTypes[$i] as $objectsTypesKeyId => $objectsTypesDataArray)\\n\\t\\t{\\n\\t\\t\\t$filterChildItemsWrapper=\'\';\\n\\t\\t\\tforeach($objectsTypesDataArray[\'subFilters\'] as $subFiltersKeyId => $subFiltersDataArray)\\n\\t\\t\\t{\\n\\t\\t\\t\\t$filterChildItems=\'\';\\n\\t\\t\\t\\tif($subFiltersDataArray[\'type\'] == \'tv\' OR !isset($subFiltersDataArray[\'type\'])) {\\n\\t\\t\\t\\t\\tfor($v=0; $v<count( $subFiltersDataArray[\'options\'] ); $v++)\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$tvFilterData = explode(\'==\', $subFiltersDataArray[\'options\'][$v][\'value\'] ); \\/\\/ \\u043f\\u043e\\u043b\\u0443\\u0447\\u0430\\u0435\\u043c \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u043d\\u043a\\u0442\\u0430 TV, \\u043d\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u044f \\u043d\\u0430 \\u0442\\u043e, \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d\\u043e \\u043e\\u043d\\u043e \\u0441 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043b\\u0438\\u0442\\u0435\\u043b\\u0435\\u043c \\"==\\" \\u0438\\u043b\\u0438 \\u0431\\u0435\\u0437 \\u043d\\u0435\\u0433\\u043e\\n\\t\\t\\t\\t\\t\\t$tvFilterVal = ( isset($tvFilterData[1]) ? $tvFilterData[1] : $tvFilterData[0] );\\n\\t\\t\\t\\t\\t\\t$tvFilterTitle = $tvFilterData[0];\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$itemInputValue = 1;\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u043f\\u043e\\u0442\\u043e\\u043c\\u043a\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\t$tplFiltersItemsParams = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'wrapper\' => \'\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'idFilterItem\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'idSubFilterItem\' => ucfirst($subFiltersKeyId) . $tvFilterVal ,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'inputSufixName\' => \'[\' . $objectsTypesKeyId . \'][\' . $subFiltersKeyId . \'][\' . $tvFilterVal . \']\',\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemTitle\' => $tvFilterTitle,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemValue\' => $tvFilterVal,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'itemInputValue\' => $itemInputValue,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classHideOrShow\' => ( $itemInputValue ? \'ymFiltersItemHide\' : \'ymFiltersItemShow\' ),\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$filterChildItems .= $pdo->getChunk($tplFiltersItems, $tplFiltersItemsParams);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif($filterChildItems != \'\') {\\n\\t\\t\\t\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u043f\\u043e\\u0442\\u043e\\u043c\\u043a\\u043e\\u0432\\n\\t\\t\\t\\t\\t\\t$tplFiltersItemsWrapperParams = array(\\n\\t\\t\\t\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'wrapper\' => $filterChildItems,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'filterId\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\'subFilterId\' => ucfirst($subFiltersKeyId),\\n\\t\\t\\t\\t\\t\\t\\t\\t\'title\' => $subFiltersDataArray[\'title\'],\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t$filterChildItemsWrapper .= $pdo->getChunk($tplFiltersItemsWrapper, $tplFiltersItemsWrapperParams);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/print_r($filterChildItemsWrapper); die;\\n\\t\\t\\t\\n\\t\\t\\t$itemInputValue = 1;\\n\\t\\t\\t\\n\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439\\n\\t\\t\\t$tplFiltersItemsParams = array(\\n\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\'wrapper\' => $filterChildItemsWrapper,\\n\\t\\t\\t\\t\\t\'idFilterItem\' => $objectsTypesKeyId,\\n\\t\\t\\t\\t\\t\'idSubFilterItem\' => \'\',\\n\\t\\t\\t\\t\\t\'inputSufixName\' => \'[\' . $objectsTypesKeyId . \'][val]\',\\n\\t\\t\\t\\t\\t\'itemTitle\' => $objectsTypesDataArray[\'title\'],\\n\\t\\t\\t\\t\\t\'itemValue\' => $objectsTypesDataArray[\'parent\'],\\n\\t\\t\\t\\t\\t\'itemInputValue\' => $itemInputValue,\\n\\t\\t\\t\\t\\t\'classHideOrShow\' => ( $itemInputValue ? \'ymFiltersItemHide\' : \'ymFiltersItemShow\' ),\\n\\t\\t\\t\\t);\\n\\t\\t\\t\\n\\t\\t\\t$filterItems .= $pdo->getChunk($tplFiltersItems, $tplFiltersItemsParams);\\n\\t\\t}\\n\\t\\tif($filterItems != \'\') {\\n\\t\\t\\t\\/\\/ \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\u0434\\u043b\\u044f \\u043e\\u0431\\u0451\\u0440\\u0442\\u043a\\u0438 \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u043e\\u0432-\\u0440\\u043e\\u0434\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439\\n\\t\\t\\t$tplFiltersItemsWrapperParams = array(\\n\\t\\t\\t\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\\t\\t\\t\'wrapper\' => $filterItems,\\n\\t\\t\\t\\t\\t\'filterId\' => $i,\\n\\t\\t\\t\\t\\t\'subFilterId\' => \'\',\\n\\t\\t\\t\\t\\t\'title\' => \'\',\\n\\t\\t\\t\\t);\\n\\t\\t\\t\\n\\t\\t\\t$filterItemsWrapper .= $pdo->getChunk($tplFiltersItemsWrapper, $tplFiltersItemsWrapperParams);\\n\\t\\t}\\n\\t}\\n\\t\\/\\/print_r( $filterItemsWrapper ); die;\\n}\\n\\/\\/ << \\u0424\\u043e\\u0440\\u043c\\u0438\\u0440\\u0443\\u0435\\u043c \\u0438 \\u0440\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a \\u0444\\u0438\\u043b\\u044c\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043e\\u0431\\u044a\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u0430\\u0440\\u0442\\u0435\\n\\n\\n\\/\\/ >> \\u0420\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\"tpl\\"\\n$tplParams = array(\\n\\t\\t\'idMap\' => $idMap,\\n\\t\\t\'centerCoords\' => \'[\'.$centerCoords.\']\',\\n\\t\\t\'zoom\' => $zoom,\\n\\t\\t\'styleMapBlock\' => $styleMapBlock,\\n\\t\\t\'styleFiltersBlock\' => $styleFiltersBlock,\\n\\t\\t\'classMapBlock\' => $classMapBlock,\\n\\t\\t\'classFiltersBlock\' => $classFiltersBlock,\\n\\t\\t\'classFiltersItem\' => $classFiltersItem,\\n\\t\\t\'idFiltersForm\' => $idFiltersForm,\\n\\t\\t\'filtersFormItems\' => $filterItemsWrapper,\\n\\t);\\n\\nreturn $pdo->getChunk($tpl, $tplParams);\\n\\/\\/ << \\u0420\\u0435\\u043d\\u0434\\u0435\\u0440\\u0438\\u043c \\u0447\\u0430\\u043d\\u043a \\"tpl\\""}',
        'guid' => '3b6b813e2f8ba40cbc8c6354d6b115e4',
        'native_key' => 0,
        'signature' => '784c606661986a20606139175dd0ce59',
      ),
    ),
    'Plugins' => 
    array (
      'b140fe3665f62957f2db51e433892402' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"yandexMaps","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"$corePath = $modx->getOption(\'core_path\', null, MODX_CORE_PATH).\'components\\/yandexmaps\\/\';\\n$assetsUrl = $modx->getOption(\'assets_url\', null, MODX_CORE_PATH).\'components\\/yandexmaps\\/\';\\nswitch ($modx->event->name) {\\n\\tcase \'OnTVInputRenderList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/input\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVOutputRenderList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/output\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVInputPropertiesList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/inputoptions\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVOutputRenderPropertiesList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/properties\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnManagerPageBeforeRender\':\\n\\t\\tbreak;\\n\\tcase \'OnDocFormRender\':\\n\\t\\t$modx->regClientCSS($assetsUrl.\'css\\/mgr\\/default.css\');\\n\\t\\t\\n\\t\\t$jqueryScript = \'<script type=\\"text\\/javascript\\">\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'if(typeof jQuery == \\"undefined\\"){\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'document.write(\\\\\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/yandex.st\\/jquery\\/2.1.1\\/jquery.min.js\\" ><\\/\\\\\'+\\\\\'script>\\\\\');\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'}\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'<\\/script>\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t\\n\\t\\t$modx->regClientStartupScript($jqueryScript, true);\\n\\t\\t\\n\\t\\t\\n\\t\\t$ymapsScript = \'<script type=\\"text\\/javascript\\">\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'if(typeof ymaps == \\"undefined\\"){\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'document.write(\\\\\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU\\" ><\\/\\\\\'+\\\\\'script>\\\\\');\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'}\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'<\\/script>\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t\\n\\t\\t$modx->regClientStartupScript($ymapsScript, true);\\n\\t\\n\\t\\tbreak;\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/yandexmaps\\/elements\\/plugins\\/plugin.yandexMaps.php","content":"$corePath = $modx->getOption(\'core_path\', null, MODX_CORE_PATH).\'components\\/yandexmaps\\/\';\\n$assetsUrl = $modx->getOption(\'assets_url\', null, MODX_CORE_PATH).\'components\\/yandexmaps\\/\';\\nswitch ($modx->event->name) {\\n\\tcase \'OnTVInputRenderList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/input\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVOutputRenderList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/output\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVInputPropertiesList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/inputoptions\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnTVOutputRenderPropertiesList\':\\n\\t\\t$modx->event->output($corePath.\'tv\\/properties\\/\');\\n\\t\\tbreak;\\n\\tcase \'OnManagerPageBeforeRender\':\\n\\t\\tbreak;\\n\\tcase \'OnDocFormRender\':\\n\\t\\t$modx->regClientCSS($assetsUrl.\'css\\/mgr\\/default.css\');\\n\\t\\t\\n\\t\\t$jqueryScript = \'<script type=\\"text\\/javascript\\">\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'if(typeof jQuery == \\"undefined\\"){\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'document.write(\\\\\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/yandex.st\\/jquery\\/2.1.1\\/jquery.min.js\\" ><\\/\\\\\'+\\\\\'script>\\\\\');\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'}\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t$jqueryScript .= \'<\\/script>\';\\n\\t\\t$jqueryScript .= \\"\\\\n\\";\\n\\t\\t\\n\\t\\t$modx->regClientStartupScript($jqueryScript, true);\\n\\t\\t\\n\\t\\t\\n\\t\\t$ymapsScript = \'<script type=\\"text\\/javascript\\">\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'if(typeof ymaps == \\"undefined\\"){\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'document.write(\\\\\'<script type=\\"text\\/javascript\\" src=\\"\\/\\/api-maps.yandex.ru\\/2.1\\/?lang=ru_RU\\" ><\\/\\\\\'+\\\\\'script>\\\\\');\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'}\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t$ymapsScript .= \'<\\/script>\';\\n\\t\\t$ymapsScript .= \\"\\\\n\\";\\n\\t\\t\\n\\t\\t$modx->regClientStartupScript($ymapsScript, true);\\n\\t\\n\\t\\tbreak;\\n}"}',
        'guid' => '79f1ca4f34dd0195fb848f9e40d2c13b',
        'native_key' => NULL,
        'signature' => 'b8950d51e9d02d69893bb7f6a1a496ba',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            'f541514f692c0b8570c4559fcc0d7fd9' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormRender","priority":0,"propertyset":0}',
              'guid' => '9548fc44d708c2ec90488c6b4522ecea',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormRender',
              ),
              'signature' => 'bc75cd1f6fdc9dab8733f9f422c65639',
            ),
            '48032e3429a00da6b061a477d10b767f' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnTVInputPropertiesList","priority":0,"propertyset":0}',
              'guid' => '06e018c86316a8cb05033ba0c6476874',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnTVInputPropertiesList',
              ),
              'signature' => '1caf84207b73d6dfc659b8762fe207ef',
            ),
            'a33022e03503ca4352579eaf31e6e4fc' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnTVInputRenderList","priority":0,"propertyset":0}',
              'guid' => '304e9d1f271054f183556ec3f5d357c6',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnTVInputRenderList',
              ),
              'signature' => '245e5ca77e76cfa8fe6acab42b047b14',
            ),
            '331d12df50b730d9e607e4953d4bb4f8' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnTVOutputRenderList","priority":0,"propertyset":0}',
              'guid' => 'ba534b0fb8ef9d088dc6b1b72737f72d',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnTVOutputRenderList',
              ),
              'signature' => 'b88ceba9bacae0978c265c48fb7ee354',
            ),
            '0f0dd2a850d8f7cfc2dd68d3d8c1dfcf' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnTVOutputRenderPropertiesList","priority":0,"propertyset":0}',
              'guid' => '16b6eee21afab8c44e4bfe18b01f5a23',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnTVOutputRenderPropertiesList',
              ),
              'signature' => '119512fb40096ff2394d3f35fb36d4e1',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'yandexmaps',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"yandexmaps-1.0.5-beta\\/modCategory\\/8aa50b8dfb0c59a84ad31d7be557ce8f\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"yandexmaps"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"yandexmaps-1.0.5-beta\\/modCategory\\/8aa50b8dfb0c59a84ad31d7be557ce8f\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"yandexmaps"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"yandexmaps-1.0.5-beta\\/modCategory\\/8aa50b8dfb0c59a84ad31d7be557ce8f.resolve.chunks.resolver","type":"php","name":"resolve.chunks"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => 'd8c36343b5582c27e5db192e0bd68de0',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '8aa50b8dfb0c59a84ad31d7be557ce8f',
  'native_key' => NULL,
  'object' => '{"id":null,"parent":0,"category":"YandexMaps"}',
);